(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1fb6a94c"],{"0571":function(t,e,r){"use strict";var i=r("b78f"),n=r.n(i);n.a},1169:function(t,e,r){var i=r("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"11e9":function(t,e,r){var i=r("52a7"),n=r("4630"),l=r("6821"),a=r("6a99"),s=r("69a8"),o=r("c69a"),c=Object.getOwnPropertyDescriptor;e.f=r("9e1e")?c:function(t,e){if(t=l(t),e=a(e,!0),o)try{return c(t,e)}catch(r){}if(s(t,e))return n(!i.f.call(t,e),t[e])}},"1af6":function(t,e,r){var i=r("63b6");i(i.S,"Array",{isArray:r("9003")})},"20fd":function(t,e,r){"use strict";var i=r("d9f6"),n=r("aebd");t.exports=function(t,e,r){e in t?i.f(t,e,n(0,r)):t[e]=r}},"2fdb":function(t,e,r){"use strict";var i=r("5ca1"),n=r("d2c8"),l="includes";i(i.P+i.F*r("5147")(l),"String",{includes:function(t){return!!~n(this,t,l).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},3702:function(t,e,r){var i=r("481b"),n=r("5168")("iterator"),l=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||l[n]===t)}},"37c8":function(t,e,r){e.f=r("2b4c")},"386b":function(t,e,r){var i=r("5ca1"),n=r("79e5"),l=r("be13"),a=/"/g,s=function(t,e,r,i){var n=String(l(t)),s="<"+e;return""!==r&&(s+=" "+r+'="'+String(i).replace(a,"&quot;")+'"'),s+">"+n+"</"+e+">"};t.exports=function(t,e){var r={};r[t]=e(s),i(i.P+i.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",r)}},"3a72":function(t,e,r){var i=r("7726"),n=r("8378"),l=r("2d00"),a=r("37c8"),s=r("86cc").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=l?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},"40c3":function(t,e,r){var i=r("6b4c"),n=r("5168")("toStringTag"),l="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(r){}};t.exports=function(t){var e,r,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=a(e=Object(t),n))?r:l?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},"456d":function(t,e,r){var i=r("4bf8"),n=r("0d58");r("5eda")("keys",(function(){return function(t){return n(i(t))}}))},"469f":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("7d7b")},4917:function(t,e,r){"use strict";var i=r("cb7c"),n=r("9def"),l=r("0390"),a=r("5f1b");r("214f")("match",1,(function(t,e,r,s){return[function(r){var i=t(this),n=void 0==r?void 0:r[e];return void 0!==n?n.call(r,i):new RegExp(r)[e](String(i))},function(t){var e=s(r,t,this);if(e.done)return e.value;var o=i(t),c=String(this);if(!o.global)return a(o,c);var d=o.unicode;o.lastIndex=0;var h,u=[],f=0;while(null!==(h=a(o,c))){var p=String(h[0]);u[f]=p,""===p&&(o.lastIndex=l(c,n(o.lastIndex),d)),f++}return 0===f?null:u}]}))},"4ee1":function(t,e,r){var i=r("5168")("iterator"),n=!1;try{var l=[7][i]();l["return"]=function(){n=!0},Array.from(l,(function(){throw 2}))}catch(a){}t.exports=function(t,e){if(!e&&!n)return!1;var r=!1;try{var l=[7],s=l[i]();s.next=function(){return{done:r=!0}},l[i]=function(){return s},t(l)}catch(a){}return r}},5147:function(t,e,r){var i=r("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[i]=!1,!"/./"[t](e)}catch(n){}}return!0}},"549b":function(t,e,r){"use strict";var i=r("d864"),n=r("63b6"),l=r("241e"),a=r("b0dc"),s=r("3702"),o=r("b447"),c=r("20fd"),d=r("7cd6");n(n.S+n.F*!r("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,r,n,h,u=l(t),f="function"==typeof this?this:Array,p=arguments.length,v=p>1?arguments[1]:void 0,b=void 0!==v,g=0,P=d(u);if(b&&(v=i(v,p>2?arguments[2]:void 0,2)),void 0==P||f==Array&&s(P))for(e=o(u.length),r=new f(e);e>g;g++)c(r,g,b?v(u[g],g):u[g]);else for(h=P.call(u),r=new f;!(n=h.next()).done;g++)c(r,g,b?a(h,v,[n.value,g],!0):n.value);return r.length=g,r}})},"54a1":function(t,e,r){r("6c1c"),r("1654"),t.exports=r("95d5")},"5d73":function(t,e,r){t.exports=r("469f")},"5eda":function(t,e,r){var i=r("5ca1"),n=r("8378"),l=r("79e5");t.exports=function(t,e){var r=(n.Object||{})[t]||Object[t],a={};a[t]=e(r),i(i.S+i.F*l((function(){r(1)})),"Object",a)}},6762:function(t,e,r){"use strict";var i=r("5ca1"),n=r("c366")(!0);i(i.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),r("9c6c")("includes")},"67ab":function(t,e,r){var i=r("ca5a")("meta"),n=r("d3f4"),l=r("69a8"),a=r("86cc").f,s=0,o=Object.isExtensible||function(){return!0},c=!r("79e5")((function(){return o(Object.preventExtensions({}))})),d=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,i)){if(!o(t))return"F";if(!e)return"E";d(t)}return t[i].i},u=function(t,e){if(!l(t,i)){if(!o(t))return!0;if(!e)return!1;d(t)}return t[i].w},f=function(t){return c&&p.NEED&&o(t)&&!l(t,i)&&d(t),t},p=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:u,onFreeze:f}},"67bb":function(t,e,r){t.exports=r("f921")},"75fc":function(t,e,r){"use strict";r.d(e,"a",(function(){return b}));var i=r("a745"),n=r.n(i),l=r("db2a");function a(t){if(n()(t))return Object(l["a"])(t)}var s=r("774e"),o=r.n(s),c=r("c8bb"),d=r.n(c),h=r("67bb"),u=r.n(h);function f(t){if("undefined"!==typeof u.a&&d()(Object(t)))return o()(t)}var p=r("e630");function v(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(t){return a(t)||f(t)||Object(p["a"])(t)||v()}},"774e":function(t,e,r){t.exports=r("d2d5")},"7bbc":function(t,e,r){var i=r("6821"),n=r("9093").f,l={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return n(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==l.call(t)?s(t):n(i(t))}},"7cd6":function(t,e,r){var i=r("40c3"),n=r("5168")("iterator"),l=r("481b");t.exports=r("584a").getIteratorMethod=function(t){if(void 0!=t)return t[n]||t["@@iterator"]||l[i(t)]}},"7d7b":function(t,e,r){var i=r("e4ae"),n=r("7cd6");t.exports=r("584a").getIterator=function(t){var e=n(t);if("function"!=typeof e)throw TypeError(t+" is not iterable!");return i(e.call(t))}},"7f7f":function(t,e,r){var i=r("86cc").f,n=Function.prototype,l=/^\s*function ([^ (]*)/,a="name";a in n||r("9e1e")&&i(n,a,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},"8a81":function(t,e,r){"use strict";var i=r("7726"),n=r("69a8"),l=r("9e1e"),a=r("5ca1"),s=r("2aba"),o=r("67ab").KEY,c=r("79e5"),d=r("5537"),h=r("7f20"),u=r("ca5a"),f=r("2b4c"),p=r("37c8"),v=r("3a72"),b=r("d4c0"),g=r("1169"),P=r("cb7c"),m=r("d3f4"),x=r("4bf8"),S=r("6821"),y=r("6a99"),w=r("4630"),L=r("2aeb"),N=r("7bbc"),A=r("11e9"),T=r("2621"),C=r("86cc"),H=r("0d58"),W=A.f,k=C.f,K=N.f,E=i.Symbol,M=i.JSON,O=M&&M.stringify,F="prototype",D=f("_hidden"),X=f("toPrimitive"),I={}.propertyIsEnumerable,_=d("symbol-registry"),Y=d("symbols"),j=d("op-symbols"),R=Object[F],B="function"==typeof E&&!!T.f,z=i.QObject,$=!z||!z[F]||!z[F].findChild,U=l&&c((function(){return 7!=L(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a}))?function(t,e,r){var i=W(R,e);i&&delete R[e],k(t,e,r),i&&t!==R&&k(R,e,i)}:k,J=function(t){var e=Y[t]=L(E[F]);return e._k=t,e},V=B&&"symbol"==typeof E.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof E},Q=function(t,e,r){return t===R&&Q(j,e,r),P(t),e=y(e,!0),P(r),n(Y,e)?(r.enumerable?(n(t,D)&&t[D][e]&&(t[D][e]=!1),r=L(r,{enumerable:w(0,!1)})):(n(t,D)||k(t,D,w(1,{})),t[D][e]=!0),U(t,e,r)):k(t,e,r)},G=function(t,e){P(t);var r,i=b(e=S(e)),n=0,l=i.length;while(l>n)Q(t,r=i[n++],e[r]);return t},q=function(t,e){return void 0===e?L(t):G(L(t),e)},Z=function(t){var e=I.call(this,t=y(t,!0));return!(this===R&&n(Y,t)&&!n(j,t))&&(!(e||!n(this,t)||!n(Y,t)||n(this,D)&&this[D][t])||e)},tt=function(t,e){if(t=S(t),e=y(e,!0),t!==R||!n(Y,e)||n(j,e)){var r=W(t,e);return!r||!n(Y,e)||n(t,D)&&t[D][e]||(r.enumerable=!0),r}},et=function(t){var e,r=K(S(t)),i=[],l=0;while(r.length>l)n(Y,e=r[l++])||e==D||e==o||i.push(e);return i},rt=function(t){var e,r=t===R,i=K(r?j:S(t)),l=[],a=0;while(i.length>a)!n(Y,e=i[a++])||r&&!n(R,e)||l.push(Y[e]);return l};B||(E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor!");var t=u(arguments.length>0?arguments[0]:void 0),e=function(r){this===R&&e.call(j,r),n(this,D)&&n(this[D],t)&&(this[D][t]=!1),U(this,t,w(1,r))};return l&&$&&U(R,t,{configurable:!0,set:e}),J(t)},s(E[F],"toString",(function(){return this._k})),A.f=tt,C.f=Q,r("9093").f=N.f=et,r("52a7").f=Z,T.f=rt,l&&!r("2d00")&&s(R,"propertyIsEnumerable",Z,!0),p.f=function(t){return J(f(t))}),a(a.G+a.W+a.F*!B,{Symbol:E});for(var it="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;it.length>nt;)f(it[nt++]);for(var lt=H(f.store),at=0;lt.length>at;)v(lt[at++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return n(_,t+="")?_[t]:_[t]=E(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in _)if(_[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),a(a.S+a.F*!B,"Object",{create:q,defineProperty:Q,defineProperties:G,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:rt});var st=c((function(){T.f(1)}));a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return T.f(x(t))}}),M&&a(a.S+a.F*(!B||c((function(){var t=E();return"[null]"!=O([t])||"{}"!=O({a:t})||"{}"!=O(Object(t))}))),"JSON",{stringify:function(t){var e,r,i=[t],n=1;while(arguments.length>n)i.push(arguments[n++]);if(r=e=i[1],(m(e)||void 0!==t)&&!V(t))return g(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!V(e))return e}),i[1]=e,O.apply(M,i)}}),E[F][X]||r("32e9")(E[F],X,E[F].valueOf),h(E,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},"8e6e":function(t,e,r){var i=r("5ca1"),n=r("990b"),l=r("6821"),a=r("11e9"),s=r("f1ae");i(i.S,"Object",{getOwnPropertyDescriptors:function(t){var e,r,i=l(t),o=a.f,c=n(i),d={},h=0;while(c.length>h)r=o(i,e=c[h++]),void 0!==r&&s(d,e,r);return d}})},"8f8c":function(t){t.exports=JSON.parse('{"startPileStr":"K000+000","startPileNo":"0","endPileStr":"K5+000","endPileNo":"5000","tunnelIntroduction":"1.比例缩放：鼠标在画布内时支持 Ctrl + 滚轮 缩放，Ctrl + alt + 滚轮 快速缩放；   2.横向滚动：鼠标在画布内时支持 shift + 滚轮 横向滚动，shift + alt + 滚轮 快速横向滚动   3.画布拖拽： 鼠标在画布内可拖拽画布   4.下载支持：根据当前缩放比例下载，最大支持65000px 宽度画布;   5.宽高自适应：切换宽高自动重新绘制画布内容","designInfoList":[{"id":"4f9dfeaa-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"0","endPileNo":"1100","startPileNoStr":"K000+000","endPileNoStr":"K1+100","levelId":"fad026e8e09741d987c4b7346e3783d4","levelName":"Ⅰ级","levelCode":"surrounding_rock_classification-Ⅰ","levelType":"0","remark":""},{"id":"4f9e0095-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"1100","endPileNo":"2200","startPileNoStr":"K1+100","endPileNoStr":"K2+200","levelId":"96f81ff4bd504b17a630b266147bad06","levelName":"Ⅲ级","levelCode":"surrounding_rock_classification-Ⅲ","levelType":"0","remark":""},{"id":"4f9e0120-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"2200","endPileNo":"3300","startPileNoStr":"K2+200","endPileNoStr":"K3+300","levelId":"820aed7377274d1e9aa09f6c57eb5524","levelName":"Ⅴ级","levelCode":"surrounding_rock_classification-Ⅴ","levelType":"0","remark":""},{"id":"4f9e01a3-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"3300","endPileNo":"4400","startPileNoStr":"K3+300","endPileNoStr":"K4+400","levelId":"f4e852ba0c414f25855ab961eccc97cc","levelName":"Ⅱ级","levelCode":"surrounding_rock_classification-Ⅱ","levelType":"0","remark":""},{"id":"4f9e0213-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"4400","endPileNo":"4600","startPileNoStr":"K4+400","endPileNoStr":"K4+600","levelId":"10b2f3b220ab44acbef990aa6945697e","levelName":"Ⅳ级","levelCode":"surrounding_rock_classification-Ⅳ","levelType":"0","remark":""},{"id":"4f9e028f-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"4600","endPileNo":"5000","startPileNoStr":"K4+600","endPileNoStr":"K5+000","levelId":"53bc75c179a141179ce9da05913544df","levelName":"Ⅵ级","levelCode":"surrounding_rock_classification-Ⅵ","levelType":"0","remark":""}],"slopeAndShaftList":[],"constructionProgress":null,"qualityInspection":null,"processIma":[{"name":"明洞及洞门","progressPercent":null,"subList":[{"name":"明洞回填","progressPercent":null,"subList":null,"dataList":[{"id":"a4928b7c-84a7-43a9-83ec-dc91ede81960","name":null,"startPileStr":"K0+080","startPileNo":"80","endPileStr":"K0+090","endPileNo":"90","progressPercent":null,"scoreLevel":"0"}]},{"name":"挡墙砌筑","progressPercent":null,"subList":null,"dataList":[{"id":"efa81292-3982-48a2-8512-589a714f813a","name":null,"startPileStr":"K0+060","startPileNo":"60","endPileStr":"K0+080","endPileNo":"80","progressPercent":null,"scoreLevel":"2"},{"id":"8e15aa7e-641b-4ebf-ba57-5dfc4443a11a","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+055","endPileNo":"55","progressPercent":null,"scoreLevel":"0"},{"id":"c7b0a35f-953a-4c69-adb2-8a80fe46601d","name":null,"startPileStr":"K4+050","startPileNo":"4050","endPileStr":"K4+100","endPileNo":"4100","progressPercent":null,"scoreLevel":"3"}]},{"name":"明洞排水","progressPercent":null,"subList":null,"dataList":[{"id":"b69cd7e2-bfca-4d34-93c8-816a762bc57b","name":null,"startPileStr":"K0+070","startPileNo":"70","endPileStr":"K0+080","endPileNo":"80","progressPercent":null,"scoreLevel":"4"}]},{"name":"明洞钢筋","progressPercent":null,"subList":null,"dataList":[{"id":"0f40f1fb-d2ce-47d8-b4d0-7d43cd6d4853","name":null,"startPileStr":"K0+120","startPileNo":"120","endPileStr":"K0+150","endPileNo":"150","progressPercent":null,"scoreLevel":"5"},{"id":"8bd22b76-a1f0-4ae6-a057-e88f490393ae","name":null,"startPileStr":"K0+100","startPileNo":"100","endPileStr":"K0+130","endPileNo":"130","progressPercent":null,"scoreLevel":"4"},{"id":"52e58e95-5482-446c-9ea0-e9b321123253","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+060","endPileNo":"60","progressPercent":null,"scoreLevel":"2"}]},{"name":"基础","progressPercent":null,"subList":null,"dataList":[{"id":"7642d7fe-a424-4506-8c17-873f2eab253a","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+055","endPileNo":"55","progressPercent":null,"scoreLevel":"1"},{"id":"315ff61c-5ea2-4cdb-8cb4-eb87765e4950","name":null,"startPileStr":"K0+045","startPileNo":"45","endPileStr":"K0+050","endPileNo":"50","progressPercent":null,"scoreLevel":"5"},{"id":"3d1d40b9-89f5-4dff-b532-8b54033b31b9","name":null,"startPileStr":"K0+030","startPileNo":"30","endPileStr":"K0+035","endPileNo":"35","progressPercent":null,"scoreLevel":"4"},{"id":"42db56ef-f0bd-4dd4-a82a-7abefac3f6ef","name":null,"startPileStr":"K0+010","startPileNo":"10","endPileStr":"K0+020","endPileNo":"20","progressPercent":null,"scoreLevel":"4"},{"id":"2ddc5007-31c9-4715-90ef-7f06a409b951","name":null,"startPileStr":"K0+000","startPileNo":"0","endPileStr":"K0+010","endPileNo":"10","progressPercent":null,"scoreLevel":"4"},{"id":"132d486f-86ce-452c-9a35-aaf199cd57b8","name":null,"startPileStr":"K0+020","startPileNo":"20","endPileStr":"K0+050","endPileNo":"50","progressPercent":null,"scoreLevel":"5"},{"id":"8f7e12a1-ec2f-41e1-bf62-9fa64ce16d23","name":null,"startPileStr":"K4+250","startPileNo":"4250","endPileStr":"K4+250","endPileNo":"4250","progressPercent":null,"scoreLevel":"4"},{"id":"db6ba73d-1bae-4753-901b-23aa61f6444a","name":null,"startPileStr":"K4+415","startPileNo":"4415","endPileStr":"K4+250","endPileNo":"4250","progressPercent":null,"scoreLevel":"5"},{"id":"23a138fb-53fa-4dd1-b93a-0cacf2975223","name":null,"startPileStr":"K4+300","startPileNo":"4300","endPileStr":"K4+400","endPileNo":"4400","progressPercent":null,"scoreLevel":"2"},{"id":"3d5e1179-a29c-4c0e-bb95-b169eb2dbbf0","name":null,"startPileStr":"K4+100","startPileNo":"4100","endPileStr":"K4+200","endPileNo":"4200","progressPercent":null,"scoreLevel":"5"},{"id":"a9db3c00-4284-4d87-a036-a96a2148cb25","name":null,"startPileStr":"K53+100","startPileNo":"53100","endPileStr":"K55+200","endPileNo":"55200","progressPercent":null,"scoreLevel":"0"}]},{"name":"明洞衬砌","progressPercent":null,"subList":null,"dataList":[{"id":"6a6d815b-d2c6-4d7e-bc22-91b773cc54dd","name":null,"startPileStr":"K0+090","startPileNo":"90","endPileStr":"K0+110","endPileNo":"110","progressPercent":null,"scoreLevel":"4"},{"id":"3b296752-9f9f-42ea-ae9b-d4570133912a","name":null,"startPileStr":"K0+060","startPileNo":"60","endPileStr":"K0+070","endPileNo":"70","progressPercent":null,"scoreLevel":"3"},{"id":"46537ffc-6755-45c3-a87a-696778b7ae50","name":null,"startPileStr":"K0+020","startPileNo":"20","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"仰拱及铺底","progressPercent":null,"subList":[{"name":"仰拱防水层铺设","progressPercent":null,"subList":null,"dataList":[{"id":"3c9570e6-791e-4c46-bb2b-1072c242d218","name":null,"startPileStr":"K0+035","startPileNo":"35","endPileStr":"K0+045","endPileNo":"45","progressPercent":null,"scoreLevel":"3"}]},{"name":"仰拱初支钢筋网","progressPercent":null,"subList":null,"dataList":[{"id":"6898ff39-7813-4c3a-9f26-32aa1e856cd6","name":null,"startPileStr":"K0+020","startPileNo":"20","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"2"}]},{"name":"开挖","progressPercent":null,"subList":null,"dataList":[{"id":"c0c20b71-cf60-4597-8241-2c113c776ac1","name":null,"startPileStr":"K0+003","startPileNo":"3","endPileStr":"K0+005","endPileNo":"5","progressPercent":null,"scoreLevel":"5"},{"id":"8c7db21c-54f7-40f8-af75-3f3dbd708d94","name":null,"startPileStr":"K4+200","startPileNo":"4200","endPileStr":"K4+300","endPileNo":"4300","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"初期支护","progressPercent":null,"subList":[{"name":"初喷","progressPercent":null,"subList":null,"dataList":[{"id":"016f1190-6974-46df-ab12-db1f074694e2","name":null,"startPileStr":"K0+080","startPileNo":"80","endPileStr":"K0+085","endPileNo":"85","progressPercent":null,"scoreLevel":"0"},{"id":"12ad55ab-6e86-459e-b60d-51f67ca5990a","name":null,"startPileStr":"K4+450","startPileNo":"4450","endPileStr":"K4+500","endPileNo":"4500","progressPercent":null,"scoreLevel":"4"},{"id":"dd8a7f7e-b95d-4678-a7c5-bf0335be3699","name":null,"startPileStr":"K4+200","startPileNo":"4200","endPileStr":"K4+200","endPileNo":"4200","progressPercent":null,"scoreLevel":"3"}]},{"name":"钢筋网","progressPercent":null,"subList":null,"dataList":[{"id":"09d8faa2-1ad3-4c03-aa9d-ea572227fa38","name":null,"startPileStr":"K0+100","startPileNo":"100","endPileStr":"K0+110","endPileNo":"110","progressPercent":null,"scoreLevel":"1"}]}],"dataList":null},{"name":"电缆槽、中心排水沟","progressPercent":null,"subList":[{"name":"钢筋","progressPercent":null,"subList":null,"dataList":[{"id":"65bd2a67-ea01-4fa5-8e17-f11d8ba082f9","name":null,"startPileStr":"K0+055","startPileNo":"55","endPileStr":"K0+075","endPileNo":"75","progressPercent":null,"scoreLevel":"4"},{"id":"db3f29fe-f22f-468d-8175-b5e55a347abd","name":null,"startPileStr":"K0+002","startPileNo":"2","endPileStr":"K0+005","endPileNo":"5","progressPercent":null,"scoreLevel":"2"}]},{"name":"开挖","progressPercent":null,"subList":null,"dataList":[{"id":"eb2fba6c-4fca-45d8-8298-ec3785fca436","name":null,"startPileStr":"K0+055","startPileNo":"55","endPileStr":"K0+060","endPileNo":"60","progressPercent":null,"scoreLevel":"0"},{"id":"e8f3cebb-946d-411c-8a70-df58ae1d6589","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+055","endPileNo":"55","progressPercent":null,"scoreLevel":"0"},{"id":"c4d13f3d-7f24-47c8-bca6-1ac8d21c625c","name":null,"startPileStr":"K4+700","startPileNo":"4700","endPileStr":"K4+800","endPileNo":"4800","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"防寒泄水洞出水口","progressPercent":null,"subList":[{"name":"分层铺筑过程","progressPercent":null,"subList":null,"dataList":[{"id":"feb7f696-1292-43cf-a00e-aaa524ef19c0","name":null,"startPileStr":"K0+085","startPileNo":"85","endPileStr":"K0+089","endPileNo":"89","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"拱墙防排水","progressPercent":null,"subList":[{"name":"防水层铺设前初支状况","progressPercent":null,"subList":null,"dataList":[{"id":"d5f220d6-43b6-4ca1-b0cb-692da371cb1d","name":null,"startPileStr":"K0+000","startPileNo":"0","endPileStr":"K0+010","endPileNo":"10","progressPercent":null,"scoreLevel":"0"},{"id":"742e29f2-bbb4-4be7-b76b-fc2d3138d946","name":null,"startPileStr":"K4+300","startPileNo":"4300","endPileStr":"K4+350","endPileNo":"4350","progressPercent":null,"scoreLevel":"3"}]},{"name":"排水管","progressPercent":null,"subList":null,"dataList":[{"id":"ee47c454-1d74-4201-ba12-d1e803b2d6f0","name":null,"startPileStr":"K0+010","startPileNo":"10","endPileStr":"K0+050","endPileNo":"50","progressPercent":null,"scoreLevel":"5"}]},{"name":"预留洞室防水层铺设前初支状况","progressPercent":null,"subList":null,"dataList":[{"id":"2808a70b-c56e-4418-85cf-17de67a37589","name":null,"startPileStr":"K0+030","startPileNo":"30","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"5"}]}],"dataList":null},{"name":"外置保温层","progressPercent":null,"subList":[{"name":"保温层","progressPercent":null,"subList":null,"dataList":[{"id":"27960d36-0a36-435d-ad9b-2249b0240fbc","name":null,"startPileStr":"K0+010","startPileNo":"10","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"5"},{"id":"e37196d3-5430-427c-8352-1ac79938ead6","name":null,"startPileStr":"K0+004","startPileNo":"4","endPileStr":"K0+004","endPileNo":"4","progressPercent":null,"scoreLevel":"3"}]}],"dataList":null},{"name":"二衬","progressPercent":null,"subList":[{"name":"衬砌钢筋","progressPercent":null,"subList":null,"dataList":[{"id":"a7fca37d-a96b-4bb4-80c6-34d42dad3744","name":null,"startPileStr":"K4+550","startPileNo":"4550","endPileStr":"K4+600","endPileNo":"4600","progressPercent":null,"scoreLevel":"5"}]},{"name":"内置保温层","progressPercent":null,"subList":null,"dataList":[{"id":"3ca2dd7e-c990-4cf1-b0fe-524656d0ad87","name":null,"startPileStr":"K0+004","startPileNo":"4","endPileStr":"K0+009","endPileNo":"9","progressPercent":null,"scoreLevel":"1"}]}],"dataList":null},{"name":"开挖","progressPercent":null,"subList":[{"name":"掌子面围岩","progressPercent":null,"subList":null,"dataList":[{"id":"ef077ad8-3c9f-472b-8d15-e256fbe5ae76","name":null,"startPileStr":"K0+110","startPileNo":"110","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"5"},{"id":"bc0f6638-3682-4021-87e5-1766c62e6bba","name":null,"startPileStr":"K0+090","startPileNo":"90","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"4"},{"id":"d54c4a90-d92c-41c3-85aa-addc7658a857","name":null,"startPileStr":"K0+070","startPileNo":"70","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"1"},{"id":"3617bc1c-1e4b-4ef0-aa09-4ab90930cf5e","name":null,"startPileStr":"K0+030","startPileNo":"30","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"4"},{"id":"9b77c577-7d94-4b60-ad4d-aaa179f5b42b","name":null,"startPileStr":"K4+200","startPileNo":"4200","endPileStr":"K4+200","endPileNo":"4200","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null}]}')},9093:function(t,e,r){var i=r("ce10"),n=r("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,n)}},"95d5":function(t,e,r){var i=r("40c3"),n=r("5168")("iterator"),l=r("481b");t.exports=r("584a").isIterable=function(t){var e=Object(t);return void 0!==e[n]||"@@iterator"in e||l.hasOwnProperty(i(e))}},"990b":function(t,e,r){var i=r("9093"),n=r("2621"),l=r("cb7c"),a=r("7726").Reflect;t.exports=a&&a.ownKeys||function(t){var e=i.f(l(t)),r=n.f;return r?e.concat(r(t)):e}},a745:function(t,e,r){t.exports=r("f410")},ac4d:function(t,e,r){r("3a72")("asyncIterator")},b0dc:function(t,e,r){var i=r("e4ae");t.exports=function(t,e,r,n){try{return n?e(i(r)[0],r[1]):e(r)}catch(a){var l=t["return"];throw void 0!==l&&i(l.call(t)),a}}},b78f:function(t,e,r){},c8bb:function(t,e,r){t.exports=r("54a1")},d03e:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"statistic-analysis-wrapper"},[r("el-form",{staticClass:"filter-wrapper form-inline",attrs:{model:t.filterData,inline:"","label-width":"80px"}},[r("el-form-item",{attrs:{label:"K","label-width":"20px"}},[r("el-input-number",{attrs:{size:"small","controls-position":"right",min:t.kMin,max:t.kMax,precision:0},model:{value:t.filterData.k,callback:function(e){t.$set(t.filterData,"k",e)},expression:"filterData.k"}})],1),r("el-form-item",{attrs:{label:"+","label-width":"20px"}},[r("el-input-number",{attrs:{size:"small","controls-position":"right",min:t.vMin,max:t.vMax,step:1,precision:1},model:{value:t.filterData.v,callback:function(e){t.$set(t.filterData,"v",e)},expression:"filterData.v"}})],1),r("el-button",{attrs:{size:"small",type:"primary",disabled:t.data.length<=2},on:{click:t.locationHandle}},[t._v("定位")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.renderAllNodesAndDownload}},[t._v("导出分析图")]),r("el-form-item",{attrs:{label:"行高","label-width":"80px"}},[r("el-select",{on:{change:t.changeRowHeight},model:{value:t.rowHeight,callback:function(e){t.rowHeight=e},expression:"rowHeight"}},t._l(t.rowHegihtOptions,(function(t){return r("el-option",{key:t,attrs:{value:t,label:t}})})),1)],1)],1),r("div",{staticClass:"content-wrapper"},[r("div",{staticClass:"header-info-box clearfix",class:{expand:t.isHeaderExpand}},[r("div",{staticClass:"inner-wrap"},[t._m(0),r("div",{staticClass:"tip-info-content"},[r("div",{staticClass:"tunnel-name"},[t._v(t._s(t.tunnelName))]),r("div",{ref:"description",staticClass:"description"},[t._v(t._s(t.tunnelIntroduction))]),t.descriptionWidth>t.descriptionWrapWidth?r("span",{staticClass:"expand-btn",on:{click:function(e){t.isHeaderExpand=!t.isHeaderExpand}}},[t._v(t._s(t.isHeaderExpand?"收起":"详情")),r("span",{staticClass:"el-icon-arrow-down"})]):t._e()])])]),r("div",{staticClass:"slider-wrap"},[r("el-slider",{attrs:{step:t.stepPx,min:t.meterToPxMin,max:t.meterToPxMax},on:{input:t.changeMeterHandle},model:{value:t.meterToPx,callback:function(e){t.meterToPx=e},expression:"meterToPx"}}),r("span",{staticClass:"tip-text"},[t._v("缩放比例（1米 = "+t._s(t.meterToPx)+"像素）")])],1),r("div",{ref:"tableWrap",staticClass:"table-wrapper",staticStyle:{"pointer-events":"none"}},[r("div",{ref:"canvasWrap",staticClass:"canvas-container"}),r("div",{ref:"scrollY",staticClass:"dark-scrollbar vertical",on:{scroll:t.scrollHandle}},[r("div",{style:{height:t.tableHeight+"px",width:"1px"}})]),r("div",{ref:"scrollX",staticClass:"dark-scrollbar horizontal",on:{scroll:t.scrollXHandle}},[r("div",{style:{width:t.tableWidth+"px",height:"1px"}})])]),t.current&&t.current.tooltip?[r("div",{staticClass:"tooltip-custom",style:t.tooltipStyle},[t._v(t._s((t.current||{}).tooltip))]),r("div",{staticClass:"line-tip",style:t.lineStyle})]:t._e()],2)],1)},n=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tip-title"},[r("div",{staticClass:"current"},[t._v("操作")]),r("div",[t._v("简介")])])}],l=r("a745"),a=r.n(l);function s(t){if(a()(t))return t}var o=r("5d73"),c=r.n(o),d=r("c8bb"),h=r.n(d),u=r("67bb"),f=r.n(u);function p(t,e){if("undefined"!==typeof f.a&&h()(Object(t))){var r=[],i=!0,n=!1,l=void 0;try{for(var a,s=c()(t);!(i=(a=s.next()).done);i=!0)if(r.push(a.value),e&&r.length===e)break}catch(o){n=!0,l=o}finally{try{i||null==s["return"]||s["return"]()}finally{if(n)throw l}}return r}}var v=r("e630");function b(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function g(t,e){return s(t)||p(t,e)||Object(v["a"])(t,e)||b()}r("6762"),r("2fdb"),r("7f7f");var P=r("75fc"),m=(r("4917"),r("8e6e"),r("456d"),r("6c7b"),r("28a5"),r("bd86")),x=(r("ac6a"),r("d263"),r("ac4d"),r("8a81"),r("5df3"),r("1c4c"),r("6b54"),r("6dd8"));function S(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=y(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,n,l=!0,a=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return l=t.done,t},e:function(t){a=!0,n=t},f:function(){try{l||null==i.return||i.return()}finally{if(a)throw n}}}}function y(t,e){if(t){if("string"===typeof t)return w(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}var L="undefined"===typeof window,N=function(t){var e,r=S(t);try{for(r.s();!(e=r.n()).done;){var i=e.value,n=i.target.__resizeListeners__||[];n.length&&n.forEach((function(t){t()}))}}catch(l){r.e(l)}finally{r.f()}},A=function(t,e){L||(t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new x["default"](N),t.__ro__.observe(t)),t.__resizeListeners__.push(e))},T=function(t,e){t&&t.__resizeListeners__&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||t.__ro__.disconnect())},C=function(t){return t*(2-t)};function H(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function W(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?H(Object(r),!0).forEach((function(e){Object(m["a"])(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var k={data:function(){return{canvasWrap:null,tableMenu:null,tableRule:null,chart:null,ctx:null,ctxRule:null,ctxFixed:null,ctxMenu:null,position:{},wrapWidth:0,wrapHeight:0,canvasHeight:0,translateX:0,translateY:0,rowHeight:40,rowHegihtOptions:[40,45,50,55,60,65],colw:40,colWidth:200,lineWidth:1,fontSize:16,fontFamily:"Microsoft YaHei Regular",tableBgColor:"transparent",tableHoverBgColor:"rgba(45, 140, 240, .1)",tableLevel3BgColor:"rgba(0, 0, 0, .04)",innerWrapBgColor:"#EEF6FD",lineColor:"#DBE2E8",fillStyle:"transparent",tickTextColor:"#84A6C3",pileStrColor:"#58718A",inOutIconBgColor:"#90A5BA",inOutIconColor:"#ffffff",fontColor:"#000000",tickFontSize:14,tickLength:8,offset:.5,scrollStep:20,ruleStep:400,preMeterToPx:4,meterToPx:4,stepPx:.5,meterToPxMin:1,meterToPxMax:30,ruleStepVal:100,faceWidth:8,zeroWidth:8,romeNumber:["Ⅰ","Ⅱ","Ⅲ","Ⅳ","Ⅴ","Ⅵ","Ⅶ","Ⅷ","Ⅸ","Ⅹ"],levelColor:["#4ECB73","#2DB7F5","#FAD337","#FF9900","#F86F00","#ED3F14"],rectColor:["#C5C9D0","#FF582F","#FF8F34","#FDC500","#3D87FF","#29CC95"],rectHoverColor:["#cccccc","#FC7858","#FAAE70","#F7D965","#84B3FE","#64D9B4"],minStripe:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGAgMAAACdogfbAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURf///////////45K5f4AAAADdFJOUwQ/Ta3MexMAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAAaSURBVAjXY2BzYJBkYEhhYJggwOCQwMA4AQASZAKV6dxVvQAAAABJRU5ErkJggg==",maxStripe:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhAQMAAACC6DsSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAGUExURf///0dwTHBCPHYAAAACdFJOUx4AotLy5wAAAAlwSFlzAAAASAAAAEgARslrPgAAAFpJREFUCNeNzLENwCAUA9H7SkHJCBklo8FojMIIlCkQjokyQCTrqiejm4QGGXVO1LhQpSC8RYjJIczE2DETbady7cj0TWhi6yTfkn1r1jFrUHz7sfWHYRaYxQM150HTObrW+AAAAABJRU5ErkJggg==",minStripeColor:null,maxStripeColor:null,scale:1,targetX:0,targetY:0,animationStepX:0,animationStepY:0,stepTime:0,data:[],rootData:[{type:"stair",level:1,text:"隧道全程桩号",fixed:"xy",sort:-1},{type:"stair",level:1,text:"设计围岩级别",fixed:"y",data:[{start:0,end:100,level:0}]}],fixedData:'[{"type":"multistage","level":1,"text":"施工进度","expand":true,"subList":[{"text":"开挖","tip":"100%","level":2,"color":"#2D8CF0","stripe":"thick","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thick","level":2}]},{"type":"multistage","level":1,"text":"质量检查","expand":false,"subList":[{"text":"初期支护","tip":"10%","level":2,"stripe":"thin","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thin","level":2}]},{"type":"multistage","level":1,"text":"工序影像","expand":true,"subList":[{"level":2,"text":"明洞衬砌","info":"明洞及洞门","data":[{"start":50,"end":54,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":1},{"start":980,"end":1100,"level":5},{"start":1480,"end":1550,"level":5},{"start":2480,"end":2500,"level":3}],"expand":true,"subList":[{"text":"基础","level":3},{"text":"钢筋","level":3}]},{"level":2,"text":"明洞及洞门","info":"明洞及洞门","expand":false,"data":[{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":1},{"start":980,"end":1100,"level":5},{"start":1480,"end":1550,"level":5},{"start":2480,"end":2500,"level":3}],"subList":[{"text":"基础","level":3,"data":[{"start":380,"end":600,"level":3},{"start":5400,"end":5500,"level":4}]},{"text":"钢筋","level":3}]}]}]',extData:'[{"type":"multistage","level":1,"text":"施工进度","expand":true,"subList":[{"text":"开挖","tip":"100%","level":2,"color":"#2D8CF0","stripe":"thick","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thick","level":2}]},{"type":"multistage","level":1,"text":"质量检查","expand":false,"subList":[{"text":"初期支护","tip":"10%","level":2,"stripe":"thin","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thin","level":2}]}]',rules:{},tableLine:{},shaft:{},startPileNo:150,endPileNo:700,startPileStr:"",endPileStr:"",current:null,rowIndex:-1,tunnelWidth:0,tableWidth:0,tableHeight:0,contentStartX:0,contentEndX:0,contentPosition:[0,0,0,0],oldDownX:0,oldDownY:0,mouseDownX:0,mouseDownY:0,lineTableData:[]}},computed:{ruleHeight:function(){return.48*this.rowHeight},tipHeight:function(){return.52*this.rowHeight},lineRectData:function(){return this.lineTableData.filter((function(t){return t.data||!t.expand&&"xy"!==t.fixed}))}},mounted:function(){A(this.$refs.canvasWrap,this.listenVessel)},methods:{init:function(){var t=this;this.canvasWrap=this.$refs.canvasWrap,this.canvasWrap.style.backgroundColor="#ffffff",this.canvasWrap.className="".concat(this.canvasWrap.className," canvas-container"),this.tableFixed=document.createElement("canvas"),this.tableMenu=document.createElement("canvas"),this.tableRule=document.createElement("canvas"),this.chart=document.createElement("canvas"),this.canvasWrap.appendChild(this.chart),this.canvasWrap.appendChild(this.tableRule),this.canvasWrap.appendChild(this.tableMenu),this.canvasWrap.appendChild(this.tableFixed),this.ctx=this.ctx||this.chart.getContext("2d"),this.ctxMenu=this.ctxMenu||this.tableMenu.getContext("2d"),this.ctxFixed=this.ctxFixed||this.tableFixed.getContext("2d"),this.ctxRule=this.ctxRule||this.tableRule.getContext("2d");var e=new Image;e.src=this.minStripe,e.onload=function(){t.minStripeColor=t.ctx.createPattern(e,"repeat")};var r=new Image;r.src=this.maxStripe,r.onload=function(){t.maxStripeColor=t.ctx.createPattern(r,"repeat")},this.listenVessel(),this.$nextTick((function(){t.initEvent()}))},initEvent:function(){this.position=this.canvasWrap.getBoundingClientRect(),this.canvasWrap.addEventListener("mousemove",this.addMouseMove),this.canvasWrap.addEventListener("mouseleave",this.addMouseLeave),this.canvasWrap.addEventListener("click",this.addMouseClick),this.canvasWrap.addEventListener("mousedown",this.addMouseDown),document.addEventListener("mouseup",this.addMouseUp),this.canvasWrap.addEventListener("mouseenter",this.addMouseWhell)},listenVessel:function(){var t=this;clearTimeout(this.timer),this.canvasWrap&&(this.timer=setTimeout((function(){t.tableRule.width=t.tableFixed.width=t.chart.width=t.tableMenu.width=t.wrapWidth=t.canvasWrap.clientWidth,t.tableRule.height=t.tableFixed.height=t.chart.height=t.tableMenu.height=t.wrapHeight=t.canvasWrap.clientHeight,t.renderAll()}),50))},addMouseMove:function(t){var e=this;this.targetX=t.offsetX,this.targetY=t.offsetY;var r=this.targetX*this.scale,i=this.targetY*this.scale,n=r-this.translateX*this.scale,l=i-this.translateY*this.scale,a=!1;switch(!0){case this.targetY<this.ruleHeight&&this.targetX>this.colWidth:a=!0;var s=this.ruleStepVal/this.ruleStep,o=(this.targetX-this.colWidth)*s-this.translateX*s+this.startPileNo;this.current={tooltip:"K".concat(Math.floor(o/1e3),"+").concat(Math.round(o%1e3)),placement:"rule",tooltipXY:[this.targetX,0]};break;case this.targetY<this.rowHeight:break;case this.targetX<this.colWidth&&this.targetY>2*this.rowHeight:this.lineTableData.forEach((function(t){!t.fixed&&e.isInnerPolygon([r,l],t.crd)&&(a=!0,e.current=t)}));break;case this.targetY<2*this.rowHeight&&this.targetX>this.colWidth:var c=this.lineRectData[0];c&&c.rect.forEach((function(t){e.isInnerPolygon([n,i],t.crd)&&(a=!0,t.placement="top",t.tooltipXY=[e.targetX,t.crd[1][1]],e.current=t)}));break;case this.targetY>2*this.rowHeight&&this.targetX>this.colWidth:var d=Math.floor(l/this.rowHeight)-1,h=this.lineRectData[d];h&&h.rect.forEach((function(t){e.isInnerPolygon([n,l],t.crd)&&(a=!0,t.placement="top",t.tooltipXY=[e.targetX,t.crd[1][1]+e.translateY],e.current=t)}))}a||(this.current=null)},addMouseLeave:function(){this.current=null,this.removeMouseWhell()},addMouseClick:function(t){if(!(Math.abs(this.mouseDownX-t.offsetX)>2||Math.abs(this.mouseDownY-t.offsetY)>2))switch(!0){case this.current&&void 0!==this.current.expand:this.current.expand=!this.current.expand,this.calcLineTableData(),this.renderAll();break;case this.current&&!!this.current.id&&"processIma"===this.current.category:this.modalInfo={modal:!0,title:"详情",id:this.current.id,readonly:!0}}},addMouseWhell:function(){this.canvasWrap.addEventListener("mousewheel",this.scrollFunc,{passive:!1})},removeMouseWhell:function(){this.canvasWrap.removeEventListener("mousewheel",this.scrollFunc,{passive:!1})},scrollFunc:function(t){if(t.preventDefault(),t.wheelDelta){var e=t.wheelDelta>0?-1:1,r=this.tableHeight>this.wrapHeight||this.tableWidth>this.wrapWidth;if(t.shiftKey&&this.tableWidth>this.wrapWidth)this.$refs.scrollX.scrollLeft=this.$refs.scrollX.scrollLeft+this.scrollStep*e*(t.altKey?8:1);else if(t.ctrlKey){this.meterToPx-=e*this.stepPx*(t.altKey?4:1),this.meterToPx=this.meterToPx<this.meterToPxMin?this.meterToPxMin:this.meterToPx,this.meterToPx=this.meterToPx>this.meterToPxMax?this.meterToPxMax:this.meterToPx;var i=this.ruleStepVal/this.ruleStep,n=(t.offsetX-this.colWidth)*i-this.translateX*i;this.ruleStep=this.meterToPx*this.ruleStepVal,this.meterToPx<this.meterToPxMax&&(this.current=null,this.$refs.scrollX.scrollLeft=this.$refs.scrollX.scrollLeft-n*this.stepPx*e*(t.altKey?4:1)),this.renderAll()}else r&&(this.current=null,this.$refs.scrollY.scrollTop=this.$refs.scrollY.scrollTop+this.scrollStep*e)}},addMouseDown:function(t){this.oldDownX=t.pageX,this.oldDownY=t.pageY,this.mouseDownX=t.offsetX,this.mouseDownY=t.offsetY,clearTimeout(this.timer),t.offsetX>this.colWidth&&t.offsetY>2*this.rowHeight&&(document.body.style.cursor="grabbing",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",this.dragCanvas))},addMouseUp:function(){var t=this;if(document.body.style.cursor="",document.onselectstart=function(){return null},document.ondragstart=null,document.removeEventListener("mousemove",this.dragCanvas),!(Date.now()-this.stepTime>10)){var e=60*this.animationStepX,r=60*this.animationStepY,i=this.animationStepX,n=this.animationStepY,l=0,a=0,s=function s(){var o=l,c=a;l=C(t.animationStepX/e)||0,a=C(t.animationStepY/r)||0,t.animationStepX+=i,t.animationStepY+=n;var d=t.$refs.scrollX.scrollLeft,h=t.$refs.scrollY.scrollTop,u=(l-o)*e,f=(a-c)*r;t.$refs.scrollX.scrollLeft-=u,t.$refs.scrollY.scrollTop-=f,d===t.$refs.scrollX.scrollLeft&&h===t.$refs.scrollY.scrollTop||u>-1&&u<1&&f>-1&&f<1||t.animationStepX===e&&t.animationStepY===r||(t.timer=setTimeout((function(){s()}),25))};s()}},dragCanvas:function(t){var e=t.pageX,r=t.pageY,i=e-this.oldDownX,n=r-this.oldDownY;this.animationStepX=i,this.animationStepY=n,this.stepTime=Date.now(),this.oldDownX=e,this.oldDownY=r,this.$refs.scrollX.scrollLeft-=i,this.$refs.scrollY.scrollTop-=n},calcRender:function(){var t=this;this.rowIndex=-1;var e=function e(r){r.forEach((function(r,i){switch(t.rowIndex++,r.ado=[],r.rect=[],r.data&&t.calcRect(r),!0){case"multistage"===r.type:t.calcTableVertical(r,i);break;case"stair"===r.type:t.calcTableStair(r,i);break;case[2,3].includes(r.level):t.calcTableLevel23(r,i);break}!1!==r.expand&&r.subList&&r.subList.length&&e(r.subList)}))};e(this.data),this.tableLine.ado=[];for(var r=1;r<=this.rowIndex;r++){var i=(r+1)*this.rowHeight+this.offset;this.tableLine.ado.push({type:"line",crd:[[this.colWidth,i],[this.wrapWidth,i]],strokeStyle:this.lineColor,ctx:this.ctxMenu})}this.tableWidth=this.tunnelWidth,this.tableHeight=this.rowHeight*(this.rowIndex+1)+2,this.calcContentXY()},calcContentXY:function(){this.contentStartX=-this.translateX,this.contentEndX=this.wrapWidth-this.translateX,this.contentStartY=-this.translateY,this.contentEndY=this.wrapHeight-this.translateY,this.contentPosition=[[this.contentStartX,this.contentStartY],[this.contentEndX,this.contentStartY],[this.contentEndX,this.contentEndY],[this.contentStartX,this.contentEndY]]},calcRect:function(t,e){var r=this,i=this.rowIndex*this.rowHeight,n=e||("y"===t.fixed?this.ctxRule:this.ctx),l="y"===t.fixed?this.levelColor:this.rectColor,a="y"===t.fixed?this.levelColor:this.rectHoverColor;t.data.forEach((function(e){var s=e.start*r.meterToPx+r.colWidth+.5,o=0;e.end?(o=e.end*r.meterToPx+r.colWidth+.5,o+=s===o?r.zeroWidth:0):o=s+r.faceWidth-.5;var c=[[s,i+1.5],[o,i+1.5],[o,i+r.rowHeight-.5],[s,i+r.rowHeight-.5]],d={};"thick"===t.stripe?(d.fillStyle=t.color,d.fillStripe=r.maxStripeColor,d.hoverFillStyle=void 0):"thin"===t.stripe&&(d.fillStripe=r.minStripeColor,d.hoverFillStyle=void 0),e.end||(d.borderRadius=4);var h={};e.tooltip&&(h.tooltip=e.tooltip);var u=[];e.levelCode&&u.push({type:"text",text:e.centerName,crd:[s+(o-s)/2,i+r.rowHeight/2],fillStyle:"#ffffff",ctx:n}),t.rect.push(W({crd:c,ado:[W({type:"polygon",crd:c,fillStyle:l[e.level%l.length],hoverFillStyle:a[e.level%a.length],strokeStyle:"#FFFFFF",ctx:n},d)].concat(u),text:t.text,id:e.id,category:e.category},h))}))},calcTableVertical:function(t,e,r){var i=this,n=r||this.ctxMenu,l=this.destruction(),a=l.x,s=l.y,o=t.expand?0:1;t.expand&&t.subList.forEach((function(t){o++,t.expand&&t.subList&&t.subList.length&&t.subList.forEach((function(){o++}))}));var c=o*this.rowHeight,d=s+c,h={};if(t.tooltip="",t.expand){var u=this.getTextWidth(t.text,"font-size: ".concat(this.fontSize,"px")).width;u>c&&(h.text=t.text.substr(0,2*o),t.tooltip=t.text);var f=a+this.colw,p=f/2;t.crd=[[a,s],[f,s],[f,d],[a,d]],t.ado.push({type:"polygon",crd:t.crd,fillStyle:this.tableBgColor,hoverFillStyle:this.tableHoverBgColor,ctx:n,ext:h});var v=h.text||t.text,b=1.3*this.fontSize,g=s+c/2-b*(v.length/2)+12;v.split("").forEach((function(e,r){t.ado.push({type:"text",text:e,crd:[p,g+r*b],font:"bold ".concat(i.fontSize,"px ").concat(i.fontFamily),ctx:n})})),t.ado.push({type:"line",crd:[[p-6,s+16],[p,s+10],[p+6,s+16]],lineWidth:2,strokeStyle:"#e8eaec",lineCap:"round",ctx:n}),this.rowIndex--}else{this.calcTableStair(t,e,this.ctxMenu),t.ado[0].hoverFillStyle=this.tableHoverBgColor;var P=s+this.rowHeight/2-3,m=a+13;t.ado.push({type:"line",crd:[[m,P],[m+6,P+6],[m+12,P]],strokeStyle:"#e8eaec",lineWidth:2,lineCap:"round",ctx:n})}},calcTableStair:function(t,e,r){var i=this.destruction(),n=i.x,l=i.y;t.crd=[[n,l],[n,l+this.rowHeight],[n+this.colWidth,l+this.rowHeight],[n+this.colWidth,l]],t.ado.push({type:"polygon",crd:t.crd,fillStyle:this.tableBgColor,ctx:r||this.ctxFixed}),t.ado.push({type:"text",text:t.text,crd:[(n+this.colWidth)/2,l+this.rowHeight/2],font:"bold ".concat(this.fontSize,"px ").concat(this.fontFamily),ctx:r||this.ctxFixed})},calcTableLevel23:function(t,e,r){var i=r||this.ctxMenu,n=this.destruction(),l=n.x,a=n.y;t.crd=[[l+this.colw,a],[l+this.colWidth,a],[l+this.colWidth,a+this.rowHeight],[l+this.colw,a+this.rowHeight]],t.ado.push({type:"polygon",crd:t.crd,fillStyle:3===t.level?this.tableLevel3BgColor:this.tableBgColor,hoverFillStyle:["","",this.tableHoverBgColor,this.tableLevel3BgColor][t.level],ctx:i});var s=(l+this.colWidth-this.colw)/2+this.colw;if(t.tip){var o=this.getTextWidth(t.tip,"font-size: ".concat(this.fontSize,"px")).width/2+2,c=this.getTextWidth(t.text,"font-size: ".concat(this.fontSize,"px")).width/2+2;t.ado.push({type:"text",text:t.text+"(",crd:[s-o,a+this.rowHeight/2],ctx:i}),t.ado.push({type:"text",text:t.tip,crd:[s+c,a+this.rowHeight/2],fillStyle:"#2D8CF0",ctx:i}),t.ado.push({type:"text",text:")",crd:[s+c+o+2,a+this.rowHeight/2],ctx:i})}else if(t.info){t.ado.push({type:"text",text:t.info,font:"bold 13px ".concat(this.fontFamily),crd:[s,a+this.rowHeight/3-1.5],ctx:i}),t.ado.push({type:"text",text:t.text,font:"".concat(.8*this.fontSize,"px ").concat(this.fontFamily),crd:[s,a+this.rowHeight/4*3+1.5],ctx:i});var d=t.expand?1:-1;(t.subList||[]).length&&t.ado.push({type:"polygon",crd:[[s-5,a+this.rowHeight/2-3*d],[s+5,a+this.rowHeight/2-3*d],[s,a+this.rowHeight/2+3*d]],fillStyle:t.expand?"#4FA5FF":"#D3DCE6",stroke:!1,ctx:i})}else{var h={},u=this.getTextWidth(t.text,"font-size: ".concat(this.fontSize,"px")).width;u>this.colWidth-this.colw&&(h.text=t.text.substr(0,7)+"...",t.tooltip=t.text),t.ado.push(W({type:"text",text:t.text,font:"".concat(.8*this.fontSize,"px ").concat(this.fontFamily),crd:[s,a+this.rowHeight/2],ctx:i},h))}},calcLineTableData:function(){var t=[],e=function e(r){r.forEach((function(r){t.push(r),!1!==r.expand&&r.subList&&r.subList.length&&e(r.subList)}))};e(this.data),this.lineTableData=t},calcTunnelWidth:function(){this.tunnelWidth=(this.endPileNo-this.startPileNo)*this.meterToPx+this.colWidth+20},destruction:function(){return{x:this.lineWidth-this.offset,y:this.rowIndex*this.rowHeight+this.lineWidth-this.offset}},renderAll:function(){var t=this;console.log("全局绘制（重绘）"),this.$nextTick((function(){t.calcRender(),t.renderRule(),t.renderNodes(),t.renderFixed()}))},renderNodes:function(){var t=this;this.ctxFixed.clearRect(0,0,this.colWidth,this.wrapHeight),this.tableMenu.width=this.tableMenu.width,this.ctxMenu.setTransform(1,0,0,1,0,this.translateY);var e=2*this.rowHeight-this.translateY,r=this.wrapHeight-this.translateY;this.ctxMenu.rect(0,e,this.wrapWidth,r),this.ctxMenu.clip(),this.lineTableData.forEach((function(e){t.render(e)})),this.translateY&&this.renderScrollShadow(this.ctxMenu,[0,e-10,this.wrapWidth,10]),this.translateX&&this.$nextTick((function(){t.renderScrollShadow(t.ctxRule,[t.colWidth-t.translateX-10,0,10,t.rowHeight*(t.rowIndex+1)])})),this.$nextTick((function(){t.render(t.tableLine)})),this.chart.width=this.chart.width,this.ctx.setTransform(1,0,0,1,this.translateX,this.translateY),this.ctx.rect(this.colWidth+1.5-this.translateX,2*this.rowHeight+this.offset-this.translateY,this.wrapWidth,this.rowHeight*(this.rowIndex-1)),this.ctx.clip(),this.ctx.save(),this.ctx.fillStyle=this.innerWrapBgColor,this.ctx.fill(),this.ctx.restore(),this.lineRectData.forEach((function(e){if(e){var r=g(e.crd[0],2),i=r[1],n=i<=t.contentEndY&&i>=t.contentStartY;"y"===e.fixed&&(n=!0),n&&e.rect.forEach((function(e){var r=g(e.crd[0],1),i=r[0],n=g(e.crd[1],1),l=n[0],a=i>t.contentEndX&&l>t.contentEndX||i<t.contentStartX&&l<t.contentStartX;!a&&t.render(e)}))}}))},renderScrollShadow:function(t,e){t.save(),t.shadowBlur=10,t.fillStyle="red",t.shadowColor="rgba(0, 0, 0, .3)",t.fillRect.apply(t,Object(P["a"])(e)),t.restore()},render:function(t,e){var r=this,i={};(t.ado||[]).forEach((function(n){switch(n.type){case"text":i=W({},n),e&&(i.ctx=e),r.drawText(i);break;case"polygon":i=W({},n),r.current===t&&i.hoverFillStyle&&(i.fillStyle=i.hoverFillStyle),e&&(i.ctx=e),r.drawPolygon(i);break;case"line":i=W({},n),e&&(i.ctx=e),r.drawLine(i);break}}))},renderRule:function(t){var e=this,r=t||this.ctxRule;t||(this.tableRule.width=this.tableRule.width,r.setTransform(1,0,0,1,this.translateX,0),r.rect(this.colWidth-this.translateX,0,this.wrapWidth,this.wrapHeight),r.clip());var i=Math.floor(Math.abs(this.translateX)/this.ruleStep)+1,n=Math.ceil((Math.abs(this.translateX)+this.wrapWidth)/this.ruleStep)+1;this.rules.ado=[],this.rules.startX=i+this.startPileNo;for(var l=i;l<n;l++){var a=this.colWidth+l*this.ruleStep-this.offset;this.rules.ado.push({type:"line",crd:[[a,this.ruleHeight],[a,this.ruleHeight+this.tickLength]],ctx:r});var s=this.ruleHeight/2+2,o=l*this.ruleStepVal;if(this.rules.ado.push({type:"text",crd:[a,s],text:o,fillStyle:this.tickTextColor,font:"".concat(this.tickFontSize*(this.ruleStep>=100?1.1:1),"px ").concat(this.fontFamily),ctx:r}),this.ruleStep>=100){var c=0;this.ruleStep>=100&&(c=2),this.ruleStep>=200&&(c=5),this.ruleStep>=400&&(c=10),this.ruleStep>=800&&(c=20),this.ruleStep>=1500&&(c=50),this.ruleStep>=3e3&&(c=100);for(var d=this.ruleStep/c,h=1;h<c;h++){var u=a+d*h-this.ruleStep;this.rules.ado.push({type:"text",crd:[u,s],text:o+this.ruleStepVal/c*h-this.ruleStepVal,fillStyle:this.tickTextColor,font:"".concat(.75*this.tickFontSize,"px ").concat(this.fontFamily),ctx:r}),this.rules.ado.push({type:"line",crd:[[u,this.ruleHeight],[u,this.ruleHeight+this.tickLength-4]],ctx:r})}}}this.render(this.rules),this.shaft.ado=[];var f="#90A5BA";(this.shaft.originData||[]).forEach((function(t){var i=e.pileNoToCrd(t.startPileNo)+e.colWidth;e.shaft.ado.push({type:"line",crd:[[i,0],[i,e.tableHeight]],ctx:r,strokeStyle:"#FFFFFF",lineWidth:2}),e.shaft.ado.push({type:"line",crd:[[i,0],[i,e.tableHeight]],ctx:r,strokeStyle:f,lineWidth:2,setLineDash:[2,2]}),e.shaft.ado.push({type:"text",text:"".concat(t.name," ").concat(t.startPileStr),crd:[i+40,e.ruleHeight+e.tipHeight/2+2],textAlign:"start",fillStyle:e.pileStrColor,ctx:r}),e.shaft.ado.push({type:"polygon",crd:[[i-6,0],[i+6,0],[i,7]],fillStyle:f,stroke:!1,ctx:r});var n=e.ruleHeight;[i,i-25].forEach((function(t,i){var l=t+e.tipHeight,a=n+e.tipHeight,s=i?l:t,o=i?t:l,c=i?-1:1,d=s+8*c,h=s+18*c,u=[[d,a-(e.ruleHeight/2-3)],[h,a-(e.ruleHeight/2-3)],[h,a-(e.ruleHeight/2-6)],[o,a-e.ruleHeight/2],[h,a-(e.ruleHeight/2+6)],[h,a-(e.ruleHeight/2+3)],[d,a-(e.ruleHeight/2+3)],[d,n]];e.shaft.ado.push({type:"polygon",crd:u,fillStyle:f,ctx:r})}))})),this.$nextTick((function(){e.render(e.shaft)}))},renderFixed:function(t){var e=this,r=t||this.ctxFixed;!t&&r.clearRect(this.colWidth+1,0,this.wrapWidth,2*this.rowHeight),[this.lineWidth,this.ruleHeight,this.rowHeight].forEach((function(t){t-=e.offset,e.drawLine({crd:[[e.colWidth,t],[e.wrapWidth,t]],ctx:r})}));var i=this.colWidth-this.offset+1,n=this.ruleHeight-this.offset,l=Math.round(Math.abs(this.translateX)/this.ruleStep*100)+this.startPileNo,a=Math.round((Math.abs(this.translateX)+this.wrapWidth-this.colWidth)/this.ruleStep*100)+this.startPileNo,s="K".concat(Math.floor(l/1e3),"+").concat(l%1e3),o="K".concat(Math.floor(a/1e3),"+").concat(a%1e3);[i,this.wrapWidth-this.ruleHeight-this.offset].forEach((function(t,i){var l=t+e.tipHeight,a=n+e.tipHeight;e.drawPolygon({crd:[[t,n],[l,n],[l,a],[t,a]],fillStyle:e.inOutIconBgColor,ctx:r});var c=i?l:t,d=i?t:l,h=i?-1:1,u=.23*e.tipHeight,f=c+u*h,p=c+(u+2)*h,v=c+(e.tipHeight-4)*h,b=[[f,n],[f,a],[p,a],[p,a-(e.ruleHeight/2-1)],[v,a-(e.ruleHeight/2-1)],[v,a-(e.ruleHeight/2-4)],[d,a-e.ruleHeight/2],[v,a-(e.ruleHeight/2+4)],[v,a-(e.ruleHeight/2+1)],[p,a-(e.ruleHeight/2+1)],[p,n]];e.drawPolygon({crd:b,fillStyle:e.inOutIconColor,ctx:r});var g={};i&&(t+=e.ruleHeight,g.textAlign="right"),e.drawText(W({crd:[t+(e.ruleHeight+10)*h,n+e.tipHeight/2+2],text:1===h?s:o,fillStyle:e.pileStrColor,textAlign:"start",ctx:r},g))}))},pileNoToCrd:function(t){return(t-this.startPileNo)*this.meterToPx||0},drawPolygon:function(t,e){var r=t.crd.concat();if(e=t.ctx||e||this.ctx,e.save(),e.strokeStyle=t.strokeStyle||this.lineColor,e.fillStyle=t.fillStyle||this.fillStyle,e.lineWidth=t.lineWidth||this.lineWidth,t.hoverFillStyle){var i=r.map((function(t){return t[0]})),n=Math.max.apply(Math,Object(P["a"])(i)),l=Math.min.apply(Math,Object(P["a"])(i)),a=r.map((function(t){return t[1]})),s=Math.max.apply(Math,Object(P["a"])(a)),o=Math.min.apply(Math,Object(P["a"])(a));e.clearRect(l,o,n-l,s-o)}if(e.beginPath(),t.borderRadius){var c=t.borderRadius,d=r.shift(),h=g(d,2),u=h[0],f=h[1],p=u-(u-r[0][0])/2;e.moveTo(p,f);do{var v=r.shift(),b=g(v,2),m=b[0],x=b[1],S=r[0]||[u,f],y=g(S,2),w=y[0],L=y[1],N=m-(m-w)/2,A=x-(x-L)/2;e.arcTo(m,x,N,A,c)}while(r.length);e.arcTo(u,f,p,f,c)}else{var T;(T=e).moveTo.apply(T,Object(P["a"])(r.shift()));do{var C;(C=e).lineTo.apply(C,Object(P["a"])(r.shift()))}while(r.length)}if(!1!==t.closePath&&e.closePath(),e.strokeStyle=t.strokeStyle,!1!==t.stroke&&e.stroke(),t.fillStyle&&e.fill(),e.restore(),t.fillStripe){var H;e.save();var W=t.crd.concat();e.fillStyle=t.fillStripe,e.globalAlpha=t.globalAlpha||1,e.beginPath(),(H=e).moveTo.apply(H,Object(P["a"])(W.shift()));do{var k;(k=e).lineTo.apply(k,Object(P["a"])(W.shift()))}while(W.length);e.closePath(),e.fill(),e.restore()}},drawLine:function(t,e){var r,i=t.crd.concat();e=t.ctx||e||this.ctx,e.save(),e.strokeStyle=t.strokeStyle||this.lineColor,e.lineCap=t.lineCap||e.lineCap,e.lineWidth=t.lineWidth||this.lineWidth,t.setLineDash&&e.setLineDash(t.setLineDash),e.beginPath(),(r=e).moveTo.apply(r,Object(P["a"])(i.shift()));do{var n;(n=e).lineTo.apply(n,Object(P["a"])(i.shift()))}while(i.length);e.stroke(),e.restore()},drawText:function(t,e){var r;e=t.ctx||e||this.ctx,e.save(),e.textBaseline=t.textBaseline||"middle",e.textAlign=t.textAlign||"center",e.font=t.font||"".concat(this.fontSize,"px ").concat(this.fontFamily),e.fillStyle=t.fillStyle||this.fontColor,(r=e).fillText.apply(r,[t.text].concat(Object(P["a"])(t.crd))),e.restore()},isInnerPolygon:function(t,e){for(var r=g(t,2),i=r[0],n=r[1],l=!1,a=0,s=e.length-1;a<e.length;s=a++){var o=g(e[a],2),c=o[0],d=o[1],h=g(e[s],2),u=h[0],f=h[1],p=d>n!==f>n&&i<(u-c)*(n-d)/(f-d)+c;p&&(l=!l)}return l},getTextWidth:function(t,e){var r=document.createElement("div");r.setAttribute("style","position: fixed; left: -100000px; opacity: 0; ".concat(e)),r.innerHTML=t,document.body.appendChild(r);var i=r.getBoundingClientRect();return document.body.removeChild(r),i},renderAllNodesAndDownload:function(){var t=this,e=document.createElement("canvas"),r=e.getContext("2d"),i=JSON.parse(JSON.stringify(this.data)),n=this.rowIndex;this.rowIndex=-1;var l=function t(e){e.forEach((function(e){void 0!==e.expand&&(e.expand=!0),e.subList&&e.subList.length&&t(e.subList)}))};l(i);var a=this.translateX;this.translateX=0;var s=[],o=[],c=function e(i){i.forEach((function(i,n){switch(o.push(i),(!i.subList||1!==i.level)&&s.push(i),t.rowIndex++,i.ado=[],i.rect=[],i.data&&t.calcRect(i,r),!0){case"multistage"===i.type:t.calcTableVertical(i,n,r);break;case"stair"===i.type:t.calcTableStair(i,n,r);break;case[2,3].includes(i.level):t.calcTableLevel23(i,n,r);break}i.subList&&i.subList.length&&e(i.subList)}))};c(i),this.rowIndex=n;var d=this.tunnelWidth,h=s.length*this.rowHeight;e.height=h+2,e.width=d;var u=this.tableHeight;this.tableHeight=h;var f=this.wrapWidth;this.wrapWidth=d,r.fillStyle=this.innerWrapBgColor,r.fillRect(this.colWidth,this.rowHeight,d,h),o.forEach((function(e){t.render(e,r),e.rect&&e.rect.forEach((function(e){t.render(e,r)}))})),this.renderRule(r),this.renderFixed(r);for(var p={ado:[]},v=Math.floor(h/this.rowHeight)-1,b=1;b<=v;b++){var g=(b+1)*this.rowHeight+this.offset;p.ado.push({type:"line",crd:[[this.colWidth,g],[d,g]],strokeStyle:this.lineColor})}this.render(p,r),this.wrapWidth=f,this.translateX=a,this.tableHeight=u,this.$nextTick((function(){var t=e.toDataURL("image/png"),r=document.createElement("a");r.href=t,r.download="施工进度图.png";var i=document.createEvent("MouseEvents");i.initEvent("click",!0,!1),r.dispatchEvent(i)}))},printHandle:function(t){var e=t.toDataURL("image/png"),r=window.open();r.document.write="<img src='".concat(e,"'/>"),r.print()}},destroyed:function(){var t=this.canvasWrap;t&&(T(t,this.listenVessel),t.removeEventListener("mousemove",this.addMouseMove),t.removeEventListener("mouseleave",this.addMouseLeave),t.removeEventListener("mouseenter",this.addMouseWhell),t.removeEventListener("mousedown",this.addMouseDown),t.removeEventListener("click",this.addMouseClick),document.removeEventListener("mouseup",this.addMouseUp),document.removeEventListener("keydown",this.keyDownHandle),document.removeEventListener("keyup",this.keyUpHandle))}},K=r("8f8c"),E={components:{},mixins:[k],data:function(){return{isHeaderExpand:!1,tunnelName:"",tunnelIntroduction:"",descriptionWrapWidth:0,descriptionWidth:0,tooltipStyle:{},lineStyle:{},filterData:{id:"",projectId:"",tunnelId:"",tunnelTrunkId:"",k:0,v:0},projectOptions:[],tunnelOptions:[],tunnelTrunkOptions:[],originData:{},modalInfo:{modal:!1,title:"详情",id:null}}},computed:{kMax:function(){return Math.floor(this.endPileNo/1e3)},vMax:function(){return this.filterData.k===this.kMax?this.endPileNo%1e3:999.9},kMin:function(){return Math.floor(this.startPileNo/1e3)},vMin:function(){return this.startPileNo%1e3}},watch:{meterToPx:function(t){this.calcTunnelWidth(),this.preMeterToPx=t},current:{handler:function(t,e){e&&this.render(e),t?(this.canvasWrap.style.cursor="pointer",this.render(t)):this.$refs.canvasWrap.style.cursor="",this.calcTooltipStyle()},deep:!0}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.originData=JSON.parse(JSON.stringify(K)),console.log("施工进度：",K.constructionProgress),console.log("质量检查：",K.qualityInspection),console.log("竖井、斜井：",K.slopeAndShaftList),console.log("工序影像：",K.processIma),console.log("围岩级别",K.designInfoList),this.shaft={originData:K.slopeAndShaftList||[]},this.descriptionWrapWidth=this.$refs.description.getBoundingClientRect().width-48,this.descriptionWidth=this.getTextWidth(K.tunnelIntroduction,"font-size: 15px").width,this.tunnelIntroduction=K.tunnelIntroduction,this.startPileNo=K.startPileNo>>>0,this.endPileNo=K.endPileNo>>>0,this.calcTunnelWidth(),this.$nextTick((function(){t.filterData.k=t.kMin,t.filterData.v=t.vMin})),this.startPileStr="进口 ".concat(K.startPileStr),this.endPileStr="出口 ".concat(K.endPileStr),this.formatData(),this.canvasWrap?this.renderAll():this.init(),setTimeout((function(){t.$refs.tableWrap.style.pointerEvents=""}),100)},formatData:function(){var t,e=this;this.data=JSON.parse(JSON.stringify(this.rootData)),this.originData.designInfoList&&(this.data[1].data=(this.originData.designInfoList||[]).map((function(t){t.centerName=t.levelName,t.piles=[t.startPileNo-e.startPileNo,t.endPileNo-e.startPileNo],t.end=t.piles[1],t.start=t.piles[0],t.level=t.levelType;var r=(t.levelCode||"").toLocaleUpperCase(),i=r.match(/[ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ]/)[0];return t.tooltip=t.centerName,t.level=e.romeNumber.indexOf(i),t}))),(t=this.data).push.apply(t,Object(P["a"])(JSON.parse(this.extData))),this.originData.processIma&&this.originData.processIma.length&&this.data.push({text:"工序影像",expand:!0,level:1,type:"multistage",subList:this.recursiveFormatting(this.originData.processIma,2,"processIma")}),this.calcLineTableData()},recursiveFormatting:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.map((function(e){if(e.text=e.name,e.expand=!1,e.level=r,2===r&&e.subList){var n=(e.subList.splice(0,1)||[{}])[0];e.dataList=n.dataList,e.text=n.name,e.info=e.name}return e.data=(e.dataList||[]).map((function(e){return e.endPileStr?(e.piles=[e.startPileNo-t.startPileNo,e.endPileNo-t.startPileNo],e.end=e.piles[1],e.tooltip="桩号范围：".concat(e.startPileStr,"~").concat(e.endPileStr)):(e.piles=[e.startPileNo-t.startPileNo],e.tooltip="桩号：".concat(e.startPileStr)),e.category=i,e.level=e.scoreLevel||e.level,e.start=e.piles[0],e})),e.subList&&e.subList.length&&t.recursiveFormatting(e.subList,r+1,i),e})),e},scrollHandle:function(t){this.translateY=-t.target.scrollTop,this.calcContentXY(),this.renderRule(),this.renderNodes()},scrollXHandle:function(t){this.translateX=-t.target.scrollLeft,this.calcContentXY(),this.renderRule(),this.renderNodes(),this.renderFixed()},changeMeterHandle:function(t){this.preMeterToPx!==t&&(this.ruleStep=this.meterToPx*this.ruleStepVal,this.renderAll())},locationHandle:function(){var t=1e3*this.filterData.k+this.filterData.v,e=t-this.startPileNo;this.$refs.scrollX.scrollLeft=e*this.meterToPx},calcTooltipStyle:function(){var t=this;clearTimeout(this.timer2),this.timer2=setTimeout((function(){if(!t.current)return{};var e=0,r=0,i=0,n=0;if(t.lineStyle={display:"none"},["rule","top"].includes(t.current.placement)){var l=t.getTextWidth(t.current.tooltip,"padding: 5px; font-size: 14px;").width/2,a=g(t.current.tooltipXY,2);n=a[0],i=a[1],"rule"===t.current.placement&&(t.lineStyle={left:n+t.position.x+"px",top:t.position.y+"px",height:t.tableHeight+"px",maxHeight:t.wrapHeight+"px"}),n=n+t.position.x-l,i+=t.position.y-30}else{var s=g(t.current.crd[0],2);r=s[1];var o=g(t.current.crd[1],1);e=o[0];var c=2;r+=t.translateY,e+=0,n=t.position.x+e+c,i=t.position.y+r+10}t.tooltipStyle={left:n+"px",top:i+"px"}}),10)},changeRowHeight:function(){var t=this;this.$nextTick((function(){t.renderAll()}))}}},M=E,O=(r("0571"),r("2877")),F=Object(O["a"])(M,i,n,!1,null,"7c5589d4",null);e["default"]=F.exports},d263:function(t,e,r){"use strict";r("386b")("fixed",(function(t){return function(){return t(this,"tt","","")}}))},d2c8:function(t,e,r){var i=r("aae3"),n=r("be13");t.exports=function(t,e,r){if(i(e))throw TypeError("String#"+r+" doesn't accept regex!");return String(n(t))}},d2d5:function(t,e,r){r("1654"),r("549b"),t.exports=r("584a").Array.from},d4c0:function(t,e,r){var i=r("0d58"),n=r("2621"),l=r("52a7");t.exports=function(t){var e=i(t),r=n.f;if(r){var a,s=r(t),o=l.f,c=0;while(s.length>c)o.call(t,a=s[c++])&&e.push(a)}return e}},db2a:function(t,e,r){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}r.d(e,"a",(function(){return i}))},e630:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));var i=r("774e"),n=r.n(i),l=r("db2a");function a(t,e){if(t){if("string"===typeof t)return Object(l["a"])(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?n()(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(l["a"])(t,e):void 0}}},f410:function(t,e,r){r("1af6"),t.exports=r("584a").Array.isArray}}]);
//# sourceMappingURL=chunk-1fb6a94c.2bc21e4a.js.map