(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5fdaae18"],{1627:function(a,e,n){"use strict";n.r(e);var t=function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{staticClass:"coordinate-acquisition-wraper"},[a.isLoading?n("Spin",{attrs:{fix:""}}):a._e(),n("div",{staticClass:"filter-wrap",class:{expand:a.isExpand}},[n("i",{staticClass:"el-icon",class:a.isExpand?"el-icon-arrow-left":"el-icon-arrow-right",on:{click:function(e){a.isExpand=!a.isExpand}}}),n("el-form",{ref:"form",staticClass:"custom-scrollbar",attrs:{model:a.formData,size:"small","label-width":"100"}},[n("el-form-item",{attrs:{label:"选择定位位置"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入位置",clearable:""},on:{clear:a.clearHandle},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.posSearchHandle(e)}},model:{value:a.formData.keyword,callback:function(e){a.$set(a.formData,"keyword",e)},expression:"formData.keyword"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:a.posSearchHandle}})],1),a._l(a.formData.coordinates,(function(e,t){return n("el-form-item",{key:t,attrs:{label:"经纬度"+(t+1),rules:a.rules.coordinate,prop:"coordinates."+t}},[n("el-input",{class:{active:a.active===t},attrs:{type:"text",icon:"md-navigate",placeholder:"请输入经纬度"},model:{value:a.formData.coordinates[t],callback:function(e){a.$set(a.formData.coordinates,t,e)},expression:"formData.coordinates[i]"}},[n("i",{staticClass:"el-input__icon el-icon-s-promotion",attrs:{slot:"suffix"},on:{click:function(e){return a.activeHandle(t)}},slot:"suffix"})]),a.formData.coordinates.length>2?n("el-button",{attrs:{icon:"el-icon-close",type:"danger"},on:{click:function(e){return a.removePointHandle(t)}}}):a._e(),a.formData.coordinates.length<15?n("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(e){a.formData.coordinates.splice(t+1,0,""),a.active=t+1}}}):a._e()],1)})),n("el-button",{attrs:{type:"primary"},on:{click:a.renderLine}},[a._v("查询路线")]),n("el-form-item",{attrs:{label:"经纬度段坐标"}},[n("el-input",{attrs:{type:"textarea",readonly:"",rows:2},model:{value:a.sectionStr,callback:function(e){a.sectionStr=e},expression:"sectionStr"}})],1),n("el-form-item",{attrs:{label:"返回路线坐标"}},[n("el-input",{attrs:{type:"textarea",readonly:"",rows:3},model:{value:a.formData.result,callback:function(e){a.$set(a.formData,"result",e)},expression:"formData.result"}})],1),n("p",[a._v("可在控制台查看完整路线对象")])],2)],1),n("div",{staticClass:"style-change"},[n("span",[a._v("地图主题：")]),n("el-select",{on:{change:a.setMapStyle},model:{value:a.formData.style,callback:function(e){a.$set(a.formData,"style",e)},expression:"formData.style"}},a._l(a.styleOptions,(function(a,e){return n("el-option",{attrs:{label:a.label,value:a.value}})})),1)],1),n("div",{ref:"searchResult",staticClass:"search-result custom-scrollbar",attrs:{id:"search-result"}}),n("div",{staticClass:"coordinate-acquisition",class:{active:-1!==a.active},attrs:{id:"coordinate-acquisition"}})],1)},o=[],i=(n("386d"),n("28a5"),n("862d")),l=n.n(i),r={name:"CoordinateAcquisition",data:function(){return{isExpand:!0,isLoading:!1,formData:{keyword:"",coordinates:["116.303843,39.983412","116.407012,39.992093"],start:"116.303843,39.983412",end:"116.407012,39.992093",result:"",style:"light"},styleOptions:[{label:"幻影黑",value:"dark"},{label:"月光银",value:"light"},{label:"远山黛",value:"whitesmoke"},{label:"草色青",value:"fresh"},{label:"雅士灰",value:"grey"},{label:"涂鸦",value:"graffiti"},{label:"马卡龙",value:"macaron"},{label:"靛青蓝",value:"blue"},{label:"极夜蓝",value:"darkblue"},{label:"酱籽",value:"wine"}],aMap:null,route:null,placeSearch:null,active:-1,rules:{coordinate:[{required:!0,message:"请输入经纬度"}]},timer:null}},computed:{sectionStr:function(){return JSON.stringify(this.formData.coordinates.map((function(a){return a.split(",").map((function(a){return+a}))})))}},mounted:function(){this.initMap()},methods:{clearHandle:function(){this.$refs.searchResult.innerHTML=""},posSearchHandle:function(){this.formData.keyword&&this.placeSearch.search(this.formData.keyword)},setMapStyle:function(){var a="amap://styles/"+this.formData.style;this.aMap.setMapStyle(a)},activeHandle:function(a){this.active===a?this.active=-1:this.active=a},removePointHandle:function(a){this.formData.coordinates.splice(a,1)},initMap:function(){var a=this;l.a.load({key:"523c9fc07c690089f319101a72c2c13e",version:"2.0Beta",plugins:["AMap.DragRoute","AMap.PlaceSearch"]}).then((function(e){a.aMap=new e.Map("coordinate-acquisition",{zoom:5,mapStyle:"amap://styles/".concat(a.formData.style)}),a.placeSearch=new window.AMap.PlaceSearch({pageSize:5,pageIndex:1,map:a.aMap,panel:"search-result",autoFitView:!0}),a.placeSearch.on("markerClick",(function(){a.aMap.setZoom(15)})),a.aMap.on("click",(function(e){-1!==a.active&&a.$set(a.formData.coordinates,a.active,"".concat(e.lnglat.lng,",").concat(e.lnglat.lat))}))})).catch((function(a){console.log(a)}))},renderLine:function(){var a=this;this.$refs.form.validate((function(e){if(e){a.isLoading=!0,a.route&&a.route.destroy();var n=a.formData.coordinates.map((function(a){return a.split(",")}));a.route=new window.AMap.DragRoute(a.aMap,n,window.AMap.DrivingPolicy.LEAST_DISTANCE),a.route.search(),a.route.on("complete",(function(e){var n=e.data,t=e.target;a.isLoading=!1,a.active=-1,a.formData.coordinates=t._path.map((function(a){return"".concat(a.lng,",").concat(a.lat)}));var o=a.route.getRoute(),i=o.map((function(a){return[a.lat,a.lng]}));a.formData.result=JSON.stringify(i);var l="font-size: 20px; font-weight: bold;font-family: 微软雅黑; color: #fff; text-shadow: 0 0 3px rgba(0, 0, 0, 1);";console.clear(),console.log("%c行车路线对象  ↓",l),console.log(n),console.log("%c行车路线数组  ↓",l),console.log(o),console.log("%c行车路线经纬度  ↓",l),console.log(i),console.log("%c行车路线经纬度JSON串  ↓",l),console.log(a.formData.result)})),a.route.on("addway",(function(e){var n=e.target;a.active=-1,a.formData.coordinates=n._path.map((function(a){return"".concat(a.lng,",").concat(a.lat)}))}))}}))}}},s=r,c=(n("28a3"),n("2877")),p=Object(c["a"])(s,t,o,!1,null,"d9072652",null);e["default"]=p.exports},"28a3":function(a,e,n){"use strict";var t=n("31f0"),o=n.n(t);o.a},"31f0":function(a,e,n){},"386d":function(a,e,n){"use strict";var t=n("cb7c"),o=n("83a1"),i=n("5f1b");n("214f")("search",1,(function(a,e,n,l){return[function(n){var t=a(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,t):new RegExp(n)[e](String(t))},function(a){var e=l(n,a,this);if(e.done)return e.value;var r=t(a),s=String(this),c=r.lastIndex;o(c,0)||(r.lastIndex=0);var p=i(r,s);return o(r.lastIndex,c)||(r.lastIndex=c),null===p?-1:p.index}]}))},"83a1":function(a,e){a.exports=Object.is||function(a,e){return a===e?0!==a||1/a===1/e:a!=a&&e!=e}},"862d":function(a,e,n){"use strict";(function(e,n){a.exports=n()})(0,(function(){function a(a){var t=[];return a.AMapUI&&t.push(e(a.AMapUI)),a.Loca&&t.push(n(a.Loca)),Promise.all(t)}function e(a){return new Promise((function(e,n){var r=[];if(a.plugins)for(var s=0;s<a.plugins.length;s+=1)-1==o.AMapUI.plugins.indexOf(a.plugins[s])&&r.push(a.plugins[s]);if(i.AMapUI===t.failed)n("前次请求 AMapUI 失败");else if(i.AMapUI===t.notload){i.AMapUI=t.loading,o.AMapUI.version=a.version||o.AMapUI.version,s=o.AMapUI.version;var c=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+s+"/main.js",p.onerror=function(a){i.AMapUI=t.failed,n("请求 AMapUI 失败")},p.onload=function(){if(i.AMapUI=t.loaded,r.length)window.AMapUI.loadUI(r,(function(){for(var a=0,n=r.length;a<n;a++){var t=r[a].split("/").slice(-1)[0];window.AMapUI[t]=arguments[a]}for(e();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()}));else for(e();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},c.appendChild(p)}else i.AMapUI===t.loaded?a.version&&a.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):r.length?window.AMapUI.loadUI(r,(function(){for(var a=0,n=r.length;a<n;a++){var t=r[a].split("/").slice(-1)[0];window.AMapUI[t]=arguments[a]}e()})):e():a.version&&a.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):l.AMapUI.push((function(a){a?n(a):r.length?window.AMapUI.loadUI(r,(function(){for(var a=0,n=r.length;a<n;a++){var t=r[a].split("/").slice(-1)[0];window.AMapUI[t]=arguments[a]}e()})):e()}))}))}function n(a){return new Promise((function(e,n){if(i.Loca===t.failed)n("前次请求 Loca 失败");else if(i.Loca===t.notload){i.Loca=t.loading,o.Loca.version=a.version||o.Loca.version;var r=o.Loca.version,s=o.AMap.version.startsWith("2"),c=r.startsWith("2");if(s&&!c||!s&&c)n("JSAPI 与 Loca 版本不对应！！");else{s=o.key,c=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+r+"&key="+s,p.onerror=function(a){i.Loca=t.failed,n("请求 AMapUI 失败")},p.onload=function(){for(i.Loca=t.loaded,e();l.Loca.length;)l.Loca.splice(0,1)[0]()},c.appendChild(p)}}else i.Loca===t.loaded?a.version&&a.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):e():a.version&&a.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):l.Loca.push((function(a){a?n(a):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var t;(function(a){a.notload="notload",a.loading="loading",a.loaded="loaded",a.failed="failed"})(t||(t={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},l={AMap:[],AMapUI:[],Loca:[]},r=[],s=function(a){"function"==typeof a&&(i.AMap===t.loaded?a(window.AMap):r.push(a))};return{load:function(e){return new Promise((function(n,l){if(i.AMap==t.failed)l("");else if(i.AMap==t.notload){var c=e.key,p=e.version,u=e.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&l("禁止多种API加载方式混用"),o.key=c,o.AMap.version=p||o.AMap.version,o.AMap.plugins=u||o.AMap.plugins,i.AMap=t.loading,p=document.body||document.head,window.___onAPILoaded=function(o){if(delete window.___onAPILoaded,o)i.AMap=t.failed,l(o);else for(i.AMap=t.loaded,a(e).then((function(){n(window.AMap)}))["catch"](l);r.length;)r.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+c+"&plugin="+o.AMap.plugins.join(","),u.onerror=function(a){i.AMap=t.failed,l(a)},p.appendChild(u)):l("请填写key")}else if(i.AMap==t.loaded)if(e.key&&e.key!==o.key)l("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)l("不允许多个版本 JSAPI 混用");else{if(c=[],e.plugins)for(p=0;p<e.plugins.length;p+=1)-1==o.AMap.plugins.indexOf(e.plugins[p])&&c.push(e.plugins[p]);c.length?window.AMap.plugin(c,(function(){a(e).then((function(){n(window.AMap)}))["catch"](l)})):a(e).then((function(){n(window.AMap)}))["catch"](l)}else if(e.key&&e.key!==o.key)l("多个不一致的 key");else if(e.version&&e.version!==o.AMap.version)l("不允许多个版本 JSAPI 混用");else{var d=[];if(e.plugins)for(p=0;p<e.plugins.length;p+=1)-1==o.AMap.plugins.indexOf(e.plugins[p])&&d.push(e.plugins[p]);s((function(){d.length?window.AMap.plugin(d,(function(){a(e).then((function(){n(window.AMap)}))["catch"](l)})):a(e).then((function(){n(window.AMap)}))["catch"](l)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},l={AMap:[],AMapUI:[],Loca:[]}}}}))}}]);
//# sourceMappingURL=chunk-5fdaae18.2921641e.js.map