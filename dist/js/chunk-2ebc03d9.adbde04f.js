(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ebc03d9"],{1627:function(e,a,n){"use strict";n.r(a);var t=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"coordinate-acquisition-wraper"},[e.isLoading?n("Spin",{attrs:{fix:""}}):e._e(),n("div",{staticClass:"filter-wrap",class:{expand:e.isExpand}},[n("i",{staticClass:"el-icon",class:e.isExpand?"el-icon-arrow-left":"el-icon-arrow-right",on:{click:function(a){e.isExpand=!e.isExpand}}}),n("el-form",{ref:"form",staticClass:"custom-scrollbar",attrs:{model:e.formData,size:"small","label-width":"100"}},[n("el-form-item",{attrs:{label:"选择定位位置"}},[n("el-input",{attrs:{type:"text",placeholder:"请输入位置",clearable:""},on:{clear:e.clearHandle},nativeOn:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.posSearchHandle.apply(null,arguments)}},model:{value:e.formData.keyword,callback:function(a){e.$set(e.formData,"keyword",a)},expression:"formData.keyword"}}),n("el-button",{attrs:{icon:"el-icon-search",type:"primary"},on:{click:e.posSearchHandle}})],1),e._l(e.formData.coordinates,(function(a,t){return n("el-form-item",{key:t,attrs:{label:"经纬度"+(t+1),rules:e.rules.coordinate,prop:"coordinates."+t}},[n("el-input",{class:{active:e.active===t},attrs:{type:"text",icon:"md-navigate",placeholder:"请输入经纬度"},model:{value:e.formData.coordinates[t],callback:function(a){e.$set(e.formData.coordinates,t,a)},expression:"formData.coordinates[i]"}},[n("i",{staticClass:"el-input__icon el-icon-s-promotion",attrs:{slot:"suffix"},on:{click:function(a){return e.activeHandle(t)}},slot:"suffix"})]),e.formData.coordinates.length>2?n("el-button",{attrs:{icon:"el-icon-close",type:"danger"},on:{click:function(a){return e.removePointHandle(t)}}}):e._e(),e.formData.coordinates.length<15?n("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(a){e.formData.coordinates.splice(t+1,0,""),e.active=t+1}}}):e._e()],1)})),n("el-button",{attrs:{type:"primary"},on:{click:e.renderLine}},[e._v("查询路线")]),n("el-form-item",{attrs:{label:"经纬度段坐标"}},[n("el-input",{attrs:{type:"textarea",readonly:"",rows:2},model:{value:e.sectionStr,callback:function(a){e.sectionStr=a},expression:"sectionStr"}})],1),n("el-form-item",{attrs:{label:"返回路线坐标"}},[n("el-input",{attrs:{type:"textarea",readonly:"",rows:3},model:{value:e.formData.result,callback:function(a){e.$set(e.formData,"result",a)},expression:"formData.result"}})],1),n("p",[e._v("可在控制台查看完整路线对象")])],2)],1),n("div",{staticClass:"style-change"},[n("span",[e._v("地图主题：")]),n("el-select",{on:{change:e.setMapStyle},model:{value:e.formData.style,callback:function(a){e.$set(e.formData,"style",a)},expression:"formData.style"}},e._l(e.styleOptions,(function(e,a){return n("el-option",{attrs:{label:e.label,value:e.value}})})),1)],1),n("div",{ref:"searchResult",staticClass:"search-result custom-scrollbar",attrs:{id:"search-result"}}),n("div",{staticClass:"coordinate-acquisition",class:{active:-1!==e.active},attrs:{id:"coordinate-acquisition"}})],1)},o=[],i=(n("386d"),n("28a5"),n("862d")),l=n.n(i),r={name:"CoordinateAcquisition",data:function(){return{isExpand:!0,isLoading:!1,formData:{keyword:"",coordinates:["116.303843,39.983412","116.407012,39.992093"],start:"116.303843,39.983412",end:"116.407012,39.992093",result:"",style:"light"},styleOptions:[{label:"幻影黑",value:"dark"},{label:"月光银",value:"light"},{label:"远山黛",value:"whitesmoke"},{label:"草色青",value:"fresh"},{label:"雅士灰",value:"grey"},{label:"涂鸦",value:"graffiti"},{label:"马卡龙",value:"macaron"},{label:"靛青蓝",value:"blue"},{label:"极夜蓝",value:"darkblue"},{label:"酱籽",value:"wine"}],aMap:null,route:null,placeSearch:null,active:-1,rules:{coordinate:[{required:!0,message:"请输入经纬度"}]},timer:null}},computed:{sectionStr:function(){return JSON.stringify(this.formData.coordinates.map((function(e){return e.split(",").map((function(e){return+e}))})))}},mounted:function(){this.initMap()},methods:{clearHandle:function(){this.$refs.searchResult.innerHTML=""},posSearchHandle:function(){this.formData.keyword&&this.placeSearch.search(this.formData.keyword)},setMapStyle:function(){var e="amap://styles/"+this.formData.style;this.aMap.setMapStyle(e)},activeHandle:function(e){this.active===e?this.active=-1:this.active=e},removePointHandle:function(e){this.formData.coordinates.splice(e,1)},initMap:function(){var e=this;l.a.load({key:"523c9fc07c690089f319101a72c2c13e",version:"2.0Beta",plugins:["AMap.DragRoute","AMap.PlaceSearch"]}).then((function(a){e.aMap=new a.Map("coordinate-acquisition",{zoom:5,mapStyle:"amap://styles/".concat(e.formData.style)}),e.placeSearch=new window.AMap.PlaceSearch({pageSize:5,pageIndex:1,map:e.aMap,panel:"search-result",autoFitView:!0}),e.placeSearch.on("markerClick",(function(){e.aMap.setZoom(15)})),e.aMap.on("click",(function(a){-1!==e.active&&e.$set(e.formData.coordinates,e.active,"".concat(a.lnglat.lng,",").concat(a.lnglat.lat))}))})).catch((function(e){console.log(e)}))},renderLine:function(){var e=this;this.$refs.form.validate((function(a){if(a){e.isLoading=!0,e.route&&e.route.destroy();var n=e.formData.coordinates.map((function(e){return e.split(",")}));e.route=new window.AMap.DragRoute(e.aMap,n,window.AMap.DrivingPolicy.LEAST_DISTANCE),e.route.search(),e.route.on("complete",(function(a){var n=a.data,t=a.target;e.isLoading=!1,e.active=-1,e.formData.coordinates=t._path.map((function(e){return"".concat(e.lng,",").concat(e.lat)}));var o=e.route.getRoute(),i=o.map((function(e){return[e.lat,e.lng]}));e.formData.result=JSON.stringify(i);var l="font-size: 20px; font-weight: bold;font-family: 微软雅黑; color: #fff; text-shadow: 0 0 3px rgba(0, 0, 0, 1);";console.clear(),console.log("%c行车路线对象  ↓",l),console.log(n),console.log("%c行车路线数组  ↓",l),console.log(o),console.log("%c行车路线经纬度  ↓",l),console.log(i),console.log("%c行车路线经纬度JSON串  ↓",l),console.log(e.formData.result)})),e.route.on("addway",(function(a){var n=a.target;e.active=-1,e.formData.coordinates=n._path.map((function(e){return"".concat(e.lng,",").concat(e.lat)}))}))}}))}}},s=r,c=(n("d75e"),n("2877")),p=Object(c["a"])(s,t,o,!1,null,"3369a5e8",null);a["default"]=p.exports},3214:function(e,a,n){},"386d":function(e,a,n){"use strict";var t=n("cb7c"),o=n("83a1"),i=n("5f1b");n("214f")("search",1,(function(e,a,n,l){return[function(n){var t=e(this),o=void 0==n?void 0:n[a];return void 0!==o?o.call(n,t):new RegExp(n)[a](String(t))},function(e){var a=l(n,e,this);if(a.done)return a.value;var r=t(e),s=String(this),c=r.lastIndex;o(c,0)||(r.lastIndex=0);var p=i(r,s);return o(r.lastIndex,c)||(r.lastIndex=c),null===p?-1:p.index}]}))},"83a1":function(e,a){e.exports=Object.is||function(e,a){return e===a?0!==e||1/e===1/a:e!=e&&a!=a}},"862d":function(e,a,n){"use strict";(function(a,n){e.exports=n()})(0,(function(){function e(e){var t=[];return e.AMapUI&&t.push(a(e.AMapUI)),e.Loca&&t.push(n(e.Loca)),Promise.all(t)}function a(e){return new Promise((function(a,n){var r=[];if(e.plugins)for(var s=0;s<e.plugins.length;s+=1)-1==o.AMapUI.plugins.indexOf(e.plugins[s])&&r.push(e.plugins[s]);if(i.AMapUI===t.failed)n("前次请求 AMapUI 失败");else if(i.AMapUI===t.notload){i.AMapUI=t.loading,o.AMapUI.version=e.version||o.AMapUI.version,s=o.AMapUI.version;var c=document.body||document.head,p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/ui/"+s+"/main.js",p.onerror=function(e){i.AMapUI=t.failed,n("请求 AMapUI 失败")},p.onload=function(){if(i.AMapUI=t.loaded,r.length)window.AMapUI.loadUI(r,(function(){for(var e=0,n=r.length;e<n;e++){var t=r[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}for(a();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()}));else for(a();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},c.appendChild(p)}else i.AMapUI===t.loaded?e.version&&e.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):r.length?window.AMapUI.loadUI(r,(function(){for(var e=0,n=r.length;e<n;e++){var t=r[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}a()})):a():e.version&&e.version!==o.AMapUI.version?n("不允许多个版本 AMapUI 混用"):l.AMapUI.push((function(e){e?n(e):r.length?window.AMapUI.loadUI(r,(function(){for(var e=0,n=r.length;e<n;e++){var t=r[e].split("/").slice(-1)[0];window.AMapUI[t]=arguments[e]}a()})):a()}))}))}function n(e){return new Promise((function(a,n){if(i.Loca===t.failed)n("前次请求 Loca 失败");else if(i.Loca===t.notload){i.Loca=t.loading,o.Loca.version=e.version||o.Loca.version;var r=o.Loca.version,s=o.AMap.version.startsWith("2"),c=r.startsWith("2");if(s&&!c||!s&&c)n("JSAPI 与 Loca 版本不对应！！");else{s=o.key,c=document.body||document.head;var p=document.createElement("script");p.type="text/javascript",p.src="https://webapi.amap.com/loca?v="+r+"&key="+s,p.onerror=function(e){i.Loca=t.failed,n("请求 AMapUI 失败")},p.onload=function(){for(i.Loca=t.loaded,a();l.Loca.length;)l.Loca.splice(0,1)[0]()},c.appendChild(p)}}else i.Loca===t.loaded?e.version&&e.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):a():e.version&&e.version!==o.Loca.version?n("不允许多个版本 Loca 混用"):l.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var t;(function(e){e.notload="notload",e.loading="loading",e.loaded="loaded",e.failed="failed"})(t||(t={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},l={AMap:[],AMapUI:[],Loca:[]},r=[],s=function(e){"function"==typeof e&&(i.AMap===t.loaded?e(window.AMap):r.push(e))};return{load:function(a){return new Promise((function(n,l){if(i.AMap==t.failed)l("");else if(i.AMap==t.notload){var c=a.key,p=a.version,u=a.plugins;c?(window.AMap&&"lbs.amap.com"!==location.host&&l("禁止多种API加载方式混用"),o.key=c,o.AMap.version=p||o.AMap.version,o.AMap.plugins=u||o.AMap.plugins,i.AMap=t.loading,p=document.body||document.head,window.___onAPILoaded=function(o){if(delete window.___onAPILoaded,o)i.AMap=t.failed,l(o);else for(i.AMap=t.loaded,e(a).then((function(){n(window.AMap)}))["catch"](l);r.length;)r.splice(0,1)[0]()},u=document.createElement("script"),u.type="text/javascript",u.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+c+"&plugin="+o.AMap.plugins.join(","),u.onerror=function(e){i.AMap=t.failed,l(e)},p.appendChild(u)):l("请填写key")}else if(i.AMap==t.loaded)if(a.key&&a.key!==o.key)l("多个不一致的 key");else if(a.version&&a.version!==o.AMap.version)l("不允许多个版本 JSAPI 混用");else{if(c=[],a.plugins)for(p=0;p<a.plugins.length;p+=1)-1==o.AMap.plugins.indexOf(a.plugins[p])&&c.push(a.plugins[p]);c.length?window.AMap.plugin(c,(function(){e(a).then((function(){n(window.AMap)}))["catch"](l)})):e(a).then((function(){n(window.AMap)}))["catch"](l)}else if(a.key&&a.key!==o.key)l("多个不一致的 key");else if(a.version&&a.version!==o.AMap.version)l("不允许多个版本 JSAPI 混用");else{var d=[];if(a.plugins)for(p=0;p<a.plugins.length;p+=1)-1==o.AMap.plugins.indexOf(a.plugins[p])&&d.push(a.plugins[p]);s((function(){d.length?window.AMap.plugin(d,(function(){e(a).then((function(){n(window.AMap)}))["catch"](l)})):e(a).then((function(){n(window.AMap)}))["catch"](l)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},i={AMap:t.notload,AMapUI:t.notload,Loca:t.notload},l={AMap:[],AMapUI:[],Loca:[]}}}}))},d75e:function(e,a,n){"use strict";n("3214")}}]);
//# sourceMappingURL=chunk-2ebc03d9.adbde04f.js.map