(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22170581"],{"06c5":function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));var r=i("6b75");function n(t,e){if(t){if("string"===typeof t)return Object(r["a"])(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Object(r["a"])(t,e):void 0}}},1169:function(t,e,i){var r=i("2d95");t.exports=Array.isArray||function(t){return"Array"==r(t)}},"11e9":function(t,e,i){var r=i("52a7"),n=i("4630"),l=i("6821"),a=i("6a99"),s=i("69a8"),o=i("c69a"),c=Object.getOwnPropertyDescriptor;e.f=i("9e1e")?c:function(t,e){if(t=l(t),e=a(e,!0),o)try{return c(t,e)}catch(i){}if(s(t,e))return n(!r.f.call(t,e),t[e])}},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var r=i("6b75");function n(t){if(Array.isArray(t))return Object(r["a"])(t)}function l(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}var a=i("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t){return n(t)||l(t)||Object(a["a"])(t)||s()}},"2fdb":function(t,e,i){"use strict";var r=i("5ca1"),n=i("d2c8"),l="includes";r(r.P+r.F*i("5147")(l),"String",{includes:function(t){return!!~n(this,t,l).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},"37c8":function(t,e,i){e.f=i("2b4c")},"386b":function(t,e,i){var r=i("5ca1"),n=i("79e5"),l=i("be13"),a=/"/g,s=function(t,e,i,r){var n=String(l(t)),s="<"+e;return""!==i&&(s+=" "+i+'="'+String(r).replace(a,"&quot;")+'"'),s+">"+n+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(s),r(r.P+r.F*n((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",i)}},"3a72":function(t,e,i){var r=i("7726"),n=i("8378"),l=i("2d00"),a=i("37c8"),s=i("86cc").f;t.exports=function(t){var e=n.Symbol||(n.Symbol=l?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},"456d":function(t,e,i){var r=i("4bf8"),n=i("0d58");i("5eda")("keys",(function(){return function(t){return n(r(t))}}))},4917:function(t,e,i){"use strict";var r=i("cb7c"),n=i("9def"),l=i("0390"),a=i("5f1b");i("214f")("match",1,(function(t,e,i,s){return[function(i){var r=t(this),n=void 0==i?void 0:i[e];return void 0!==n?n.call(i,r):new RegExp(i)[e](String(r))},function(t){var e=s(i,t,this);if(e.done)return e.value;var o=r(t),c=String(this);if(!o.global)return a(o,c);var d=o.unicode;o.lastIndex=0;var h,u=[],f=0;while(null!==(h=a(o,c))){var p=String(h[0]);u[f]=p,""===p&&(o.lastIndex=l(c,n(o.lastIndex),d)),f++}return 0===f?null:u}]}))},5147:function(t,e,i){var r=i("2b4c")("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[r]=!1,!"/./"[t](e)}catch(n){}}return!0}},"562e":function(t,e,i){},"5eda":function(t,e,i){var r=i("5ca1"),n=i("8378"),l=i("79e5");t.exports=function(t,e){var i=(n.Object||{})[t]||Object[t],a={};a[t]=e(i),r(r.S+r.F*l((function(){i(1)})),"Object",a)}},6762:function(t,e,i){"use strict";var r=i("5ca1"),n=i("c366")(!0);r(r.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),i("9c6c")("includes")},"67ab":function(t,e,i){var r=i("ca5a")("meta"),n=i("d3f4"),l=i("69a8"),a=i("86cc").f,s=0,o=Object.isExtensible||function(){return!0},c=!i("79e5")((function(){return o(Object.preventExtensions({}))})),d=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!n(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!l(t,r)){if(!o(t))return"F";if(!e)return"E";d(t)}return t[r].i},u=function(t,e){if(!l(t,r)){if(!o(t))return!0;if(!e)return!1;d(t)}return t[r].w},f=function(t){return c&&p.NEED&&o(t)&&!l(t,r)&&d(t),t},p=t.exports={KEY:r,NEED:!1,fastKey:h,getWeak:u,onFreeze:f}},"6b75":function(t,e,i){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}i.d(e,"a",(function(){return r}))},"75db":function(t,e,i){"use strict";i("562e")},"7bbc":function(t,e,i){var r=i("6821"),n=i("9093").f,l={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return n(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==l.call(t)?s(t):n(r(t))}},"7f7f":function(t,e,i){var r=i("86cc").f,n=Function.prototype,l=/^\s*function ([^ (]*)/,a="name";a in n||i("9e1e")&&r(n,a,{configurable:!0,get:function(){try{return(""+this).match(l)[1]}catch(t){return""}}})},"8a81":function(t,e,i){"use strict";var r=i("7726"),n=i("69a8"),l=i("9e1e"),a=i("5ca1"),s=i("2aba"),o=i("67ab").KEY,c=i("79e5"),d=i("5537"),h=i("7f20"),u=i("ca5a"),f=i("2b4c"),p=i("37c8"),v=i("3a72"),b=i("d4c0"),g=i("1169"),P=i("cb7c"),m=i("d3f4"),x=i("4bf8"),S=i("6821"),y=i("6a99"),w=i("4630"),L=i("2aeb"),N=i("7bbc"),A=i("11e9"),T=i("2621"),C=i("86cc"),H=i("0d58"),W=A.f,k=C.f,K=N.f,E=r.Symbol,M=r.JSON,F=M&&M.stringify,O="prototype",D=f("_hidden"),X=f("toPrimitive"),_={}.propertyIsEnumerable,I=d("symbol-registry"),Y=d("symbols"),j=d("op-symbols"),R=Object[O],B="function"==typeof E&&!!T.f,z=r.QObject,$=!z||!z[O]||!z[O].findChild,U=l&&c((function(){return 7!=L(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a}))?function(t,e,i){var r=W(R,e);r&&delete R[e],k(t,e,i),r&&t!==R&&k(R,e,r)}:k,J=function(t){var e=Y[t]=L(E[O]);return e._k=t,e},V=B&&"symbol"==typeof E.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof E},Q=function(t,e,i){return t===R&&Q(j,e,i),P(t),e=y(e,!0),P(i),n(Y,e)?(i.enumerable?(n(t,D)&&t[D][e]&&(t[D][e]=!1),i=L(i,{enumerable:w(0,!1)})):(n(t,D)||k(t,D,w(1,{})),t[D][e]=!0),U(t,e,i)):k(t,e,i)},G=function(t,e){P(t);var i,r=b(e=S(e)),n=0,l=r.length;while(l>n)Q(t,i=r[n++],e[i]);return t},q=function(t,e){return void 0===e?L(t):G(L(t),e)},Z=function(t){var e=_.call(this,t=y(t,!0));return!(this===R&&n(Y,t)&&!n(j,t))&&(!(e||!n(this,t)||!n(Y,t)||n(this,D)&&this[D][t])||e)},tt=function(t,e){if(t=S(t),e=y(e,!0),t!==R||!n(Y,e)||n(j,e)){var i=W(t,e);return!i||!n(Y,e)||n(t,D)&&t[D][e]||(i.enumerable=!0),i}},et=function(t){var e,i=K(S(t)),r=[],l=0;while(i.length>l)n(Y,e=i[l++])||e==D||e==o||r.push(e);return r},it=function(t){var e,i=t===R,r=K(i?j:S(t)),l=[],a=0;while(r.length>a)!n(Y,e=r[a++])||i&&!n(R,e)||l.push(Y[e]);return l};B||(E=function(){if(this instanceof E)throw TypeError("Symbol is not a constructor!");var t=u(arguments.length>0?arguments[0]:void 0),e=function(i){this===R&&e.call(j,i),n(this,D)&&n(this[D],t)&&(this[D][t]=!1),U(this,t,w(1,i))};return l&&$&&U(R,t,{configurable:!0,set:e}),J(t)},s(E[O],"toString",(function(){return this._k})),A.f=tt,C.f=Q,i("9093").f=N.f=et,i("52a7").f=Z,T.f=it,l&&!i("2d00")&&s(R,"propertyIsEnumerable",Z,!0),p.f=function(t){return J(f(t))}),a(a.G+a.W+a.F*!B,{Symbol:E});for(var rt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;rt.length>nt;)f(rt[nt++]);for(var lt=H(f.store),at=0;lt.length>at;)v(lt[at++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return n(I,t+="")?I[t]:I[t]=E(t)},keyFor:function(t){if(!V(t))throw TypeError(t+" is not a symbol!");for(var e in I)if(I[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),a(a.S+a.F*!B,"Object",{create:q,defineProperty:Q,defineProperties:G,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:it});var st=c((function(){T.f(1)}));a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return T.f(x(t))}}),M&&a(a.S+a.F*(!B||c((function(){var t=E();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))}))),"JSON",{stringify:function(t){var e,i,r=[t],n=1;while(arguments.length>n)r.push(arguments[n++]);if(i=e=r[1],(m(e)||void 0!==t)&&!V(t))return g(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!V(e))return e}),r[1]=e,F.apply(M,r)}}),E[O][X]||i("32e9")(E[O],X,E[O].valueOf),h(E,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},"8e6e":function(t,e,i){var r=i("5ca1"),n=i("990b"),l=i("6821"),a=i("11e9"),s=i("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,i,r=l(t),o=a.f,c=n(r),d={},h=0;while(c.length>h)i=o(r,e=c[h++]),void 0!==i&&s(d,e,i);return d}})},"8f8c":function(t){t.exports=JSON.parse('{"startPileStr":"K000+000","startPileNo":"0","endPileStr":"K5+000","endPileNo":"5000","tunnelIntroduction":"1.比例缩放：鼠标在画布内时支持 Ctrl + 滚轮 缩放，Ctrl + alt + 滚轮 快速缩放；   2.横向滚动：鼠标在画布内时支持 shift + 滚轮 横向滚动，shift + alt + 滚轮 快速横向滚动   3.画布拖拽： 鼠标在画布内可拖拽画布   4.下载支持：根据当前缩放比例下载，最大支持65000px 宽度画布;   5.宽高自适应：切换宽高自动重新绘制画布内容","designInfoList":[{"id":"4f9dfeaa-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"0","endPileNo":"1100","startPileNoStr":"K000+000","endPileNoStr":"K1+100","levelId":"fad026e8e09741d987c4b7346e3783d4","levelName":"Ⅰ级","levelCode":"surrounding_rock_classification-Ⅰ","levelType":"0","remark":""},{"id":"4f9e0095-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"1100","endPileNo":"2200","startPileNoStr":"K1+100","endPileNoStr":"K2+200","levelId":"96f81ff4bd504b17a630b266147bad06","levelName":"Ⅲ级","levelCode":"surrounding_rock_classification-Ⅲ","levelType":"0","remark":""},{"id":"4f9e0120-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"2200","endPileNo":"3300","startPileNoStr":"K2+200","endPileNoStr":"K3+300","levelId":"820aed7377274d1e9aa09f6c57eb5524","levelName":"Ⅴ级","levelCode":"surrounding_rock_classification-Ⅴ","levelType":"0","remark":""},{"id":"4f9e01a3-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"3300","endPileNo":"4400","startPileNoStr":"K3+300","endPileNoStr":"K4+400","levelId":"f4e852ba0c414f25855ab961eccc97cc","levelName":"Ⅱ级","levelCode":"surrounding_rock_classification-Ⅱ","levelType":"0","remark":""},{"id":"4f9e0213-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"4400","endPileNo":"4600","startPileNoStr":"K4+400","endPileNoStr":"K4+600","levelId":"10b2f3b220ab44acbef990aa6945697e","levelName":"Ⅳ级","levelCode":"surrounding_rock_classification-Ⅳ","levelType":"0","remark":""},{"id":"4f9e028f-727d-11eb-9fe2-0242ac110006","tunnelId":"92627b5b5b4240acb67c0078f2b312da","paramTunnelTrunk":"353e9b1ec6b846baad0296434c73e4b6","tunnelTrunkName":"单洞","startPileNo":"4600","endPileNo":"5000","startPileNoStr":"K4+600","endPileNoStr":"K5+000","levelId":"53bc75c179a141179ce9da05913544df","levelName":"Ⅵ级","levelCode":"surrounding_rock_classification-Ⅵ","levelType":"0","remark":""}],"slopeAndShaftList":[],"constructionProgress":null,"qualityInspection":null,"processIma":[{"name":"明洞及洞门","progressPercent":null,"subList":[{"name":"明洞回填","progressPercent":null,"subList":null,"dataList":[{"id":"a4928b7c-84a7-43a9-83ec-dc91ede81960","name":null,"startPileStr":"K0+080","startPileNo":"80","endPileStr":"K0+090","endPileNo":"90","progressPercent":null,"scoreLevel":"0"}]},{"name":"挡墙砌筑","progressPercent":null,"subList":null,"dataList":[{"id":"efa81292-3982-48a2-8512-589a714f813a","name":null,"startPileStr":"K0+060","startPileNo":"60","endPileStr":"K0+080","endPileNo":"80","progressPercent":null,"scoreLevel":"2"},{"id":"8e15aa7e-641b-4ebf-ba57-5dfc4443a11a","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+055","endPileNo":"55","progressPercent":null,"scoreLevel":"0"},{"id":"c7b0a35f-953a-4c69-adb2-8a80fe46601d","name":null,"startPileStr":"K4+050","startPileNo":"4050","endPileStr":"K4+100","endPileNo":"4100","progressPercent":null,"scoreLevel":"3"}]},{"name":"明洞排水","progressPercent":null,"subList":null,"dataList":[{"id":"b69cd7e2-bfca-4d34-93c8-816a762bc57b","name":null,"startPileStr":"K0+070","startPileNo":"70","endPileStr":"K0+080","endPileNo":"80","progressPercent":null,"scoreLevel":"4"}]},{"name":"明洞钢筋","progressPercent":null,"subList":null,"dataList":[{"id":"0f40f1fb-d2ce-47d8-b4d0-7d43cd6d4853","name":null,"startPileStr":"K0+120","startPileNo":"120","endPileStr":"K0+150","endPileNo":"150","progressPercent":null,"scoreLevel":"5"},{"id":"8bd22b76-a1f0-4ae6-a057-e88f490393ae","name":null,"startPileStr":"K0+100","startPileNo":"100","endPileStr":"K0+130","endPileNo":"130","progressPercent":null,"scoreLevel":"4"},{"id":"52e58e95-5482-446c-9ea0-e9b321123253","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+060","endPileNo":"60","progressPercent":null,"scoreLevel":"2"}]},{"name":"基础","progressPercent":null,"subList":null,"dataList":[{"id":"7642d7fe-a424-4506-8c17-873f2eab253a","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+055","endPileNo":"55","progressPercent":null,"scoreLevel":"1"},{"id":"315ff61c-5ea2-4cdb-8cb4-eb87765e4950","name":null,"startPileStr":"K0+045","startPileNo":"45","endPileStr":"K0+050","endPileNo":"50","progressPercent":null,"scoreLevel":"5"},{"id":"3d1d40b9-89f5-4dff-b532-8b54033b31b9","name":null,"startPileStr":"K0+030","startPileNo":"30","endPileStr":"K0+035","endPileNo":"35","progressPercent":null,"scoreLevel":"4"},{"id":"42db56ef-f0bd-4dd4-a82a-7abefac3f6ef","name":null,"startPileStr":"K0+010","startPileNo":"10","endPileStr":"K0+020","endPileNo":"20","progressPercent":null,"scoreLevel":"4"},{"id":"2ddc5007-31c9-4715-90ef-7f06a409b951","name":null,"startPileStr":"K0+000","startPileNo":"0","endPileStr":"K0+010","endPileNo":"10","progressPercent":null,"scoreLevel":"4"},{"id":"132d486f-86ce-452c-9a35-aaf199cd57b8","name":null,"startPileStr":"K0+020","startPileNo":"20","endPileStr":"K0+050","endPileNo":"50","progressPercent":null,"scoreLevel":"5"},{"id":"8f7e12a1-ec2f-41e1-bf62-9fa64ce16d23","name":null,"startPileStr":"K4+250","startPileNo":"4250","endPileStr":"K4+250","endPileNo":"4250","progressPercent":null,"scoreLevel":"4"},{"id":"db6ba73d-1bae-4753-901b-23aa61f6444a","name":null,"startPileStr":"K4+415","startPileNo":"4415","endPileStr":"K4+250","endPileNo":"4250","progressPercent":null,"scoreLevel":"5"},{"id":"23a138fb-53fa-4dd1-b93a-0cacf2975223","name":null,"startPileStr":"K4+300","startPileNo":"4300","endPileStr":"K4+400","endPileNo":"4400","progressPercent":null,"scoreLevel":"2"},{"id":"3d5e1179-a29c-4c0e-bb95-b169eb2dbbf0","name":null,"startPileStr":"K4+100","startPileNo":"4100","endPileStr":"K4+200","endPileNo":"4200","progressPercent":null,"scoreLevel":"5"},{"id":"a9db3c00-4284-4d87-a036-a96a2148cb25","name":null,"startPileStr":"K53+100","startPileNo":"53100","endPileStr":"K55+200","endPileNo":"55200","progressPercent":null,"scoreLevel":"0"}]},{"name":"明洞衬砌","progressPercent":null,"subList":null,"dataList":[{"id":"6a6d815b-d2c6-4d7e-bc22-91b773cc54dd","name":null,"startPileStr":"K0+090","startPileNo":"90","endPileStr":"K0+110","endPileNo":"110","progressPercent":null,"scoreLevel":"4"},{"id":"3b296752-9f9f-42ea-ae9b-d4570133912a","name":null,"startPileStr":"K0+060","startPileNo":"60","endPileStr":"K0+070","endPileNo":"70","progressPercent":null,"scoreLevel":"3"},{"id":"46537ffc-6755-45c3-a87a-696778b7ae50","name":null,"startPileStr":"K0+020","startPileNo":"20","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"仰拱及铺底","progressPercent":null,"subList":[{"name":"仰拱防水层铺设","progressPercent":null,"subList":null,"dataList":[{"id":"3c9570e6-791e-4c46-bb2b-1072c242d218","name":null,"startPileStr":"K0+035","startPileNo":"35","endPileStr":"K0+045","endPileNo":"45","progressPercent":null,"scoreLevel":"3"}]},{"name":"仰拱初支钢筋网","progressPercent":null,"subList":null,"dataList":[{"id":"6898ff39-7813-4c3a-9f26-32aa1e856cd6","name":null,"startPileStr":"K0+020","startPileNo":"20","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"2"}]},{"name":"开挖","progressPercent":null,"subList":null,"dataList":[{"id":"c0c20b71-cf60-4597-8241-2c113c776ac1","name":null,"startPileStr":"K0+003","startPileNo":"3","endPileStr":"K0+005","endPileNo":"5","progressPercent":null,"scoreLevel":"5"},{"id":"8c7db21c-54f7-40f8-af75-3f3dbd708d94","name":null,"startPileStr":"K4+200","startPileNo":"4200","endPileStr":"K4+300","endPileNo":"4300","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"初期支护","progressPercent":null,"subList":[{"name":"初喷","progressPercent":null,"subList":null,"dataList":[{"id":"016f1190-6974-46df-ab12-db1f074694e2","name":null,"startPileStr":"K0+080","startPileNo":"80","endPileStr":"K0+085","endPileNo":"85","progressPercent":null,"scoreLevel":"0"},{"id":"12ad55ab-6e86-459e-b60d-51f67ca5990a","name":null,"startPileStr":"K4+450","startPileNo":"4450","endPileStr":"K4+500","endPileNo":"4500","progressPercent":null,"scoreLevel":"4"},{"id":"dd8a7f7e-b95d-4678-a7c5-bf0335be3699","name":null,"startPileStr":"K4+200","startPileNo":"4200","endPileStr":"K4+200","endPileNo":"4200","progressPercent":null,"scoreLevel":"3"}]},{"name":"钢筋网","progressPercent":null,"subList":null,"dataList":[{"id":"09d8faa2-1ad3-4c03-aa9d-ea572227fa38","name":null,"startPileStr":"K0+100","startPileNo":"100","endPileStr":"K0+110","endPileNo":"110","progressPercent":null,"scoreLevel":"1"}]}],"dataList":null},{"name":"电缆槽、中心排水沟","progressPercent":null,"subList":[{"name":"钢筋","progressPercent":null,"subList":null,"dataList":[{"id":"65bd2a67-ea01-4fa5-8e17-f11d8ba082f9","name":null,"startPileStr":"K0+055","startPileNo":"55","endPileStr":"K0+075","endPileNo":"75","progressPercent":null,"scoreLevel":"4"},{"id":"db3f29fe-f22f-468d-8175-b5e55a347abd","name":null,"startPileStr":"K0+002","startPileNo":"2","endPileStr":"K0+005","endPileNo":"5","progressPercent":null,"scoreLevel":"2"}]},{"name":"开挖","progressPercent":null,"subList":null,"dataList":[{"id":"eb2fba6c-4fca-45d8-8298-ec3785fca436","name":null,"startPileStr":"K0+055","startPileNo":"55","endPileStr":"K0+060","endPileNo":"60","progressPercent":null,"scoreLevel":"0"},{"id":"e8f3cebb-946d-411c-8a70-df58ae1d6589","name":null,"startPileStr":"K0+050","startPileNo":"50","endPileStr":"K0+055","endPileNo":"55","progressPercent":null,"scoreLevel":"0"},{"id":"c4d13f3d-7f24-47c8-bca6-1ac8d21c625c","name":null,"startPileStr":"K4+700","startPileNo":"4700","endPileStr":"K4+800","endPileNo":"4800","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"防寒泄水洞出水口","progressPercent":null,"subList":[{"name":"分层铺筑过程","progressPercent":null,"subList":null,"dataList":[{"id":"feb7f696-1292-43cf-a00e-aaa524ef19c0","name":null,"startPileStr":"K0+085","startPileNo":"85","endPileStr":"K0+089","endPileNo":"89","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null},{"name":"拱墙防排水","progressPercent":null,"subList":[{"name":"防水层铺设前初支状况","progressPercent":null,"subList":null,"dataList":[{"id":"d5f220d6-43b6-4ca1-b0cb-692da371cb1d","name":null,"startPileStr":"K0+000","startPileNo":"0","endPileStr":"K0+010","endPileNo":"10","progressPercent":null,"scoreLevel":"0"},{"id":"742e29f2-bbb4-4be7-b76b-fc2d3138d946","name":null,"startPileStr":"K4+300","startPileNo":"4300","endPileStr":"K4+350","endPileNo":"4350","progressPercent":null,"scoreLevel":"3"}]},{"name":"排水管","progressPercent":null,"subList":null,"dataList":[{"id":"ee47c454-1d74-4201-ba12-d1e803b2d6f0","name":null,"startPileStr":"K0+010","startPileNo":"10","endPileStr":"K0+050","endPileNo":"50","progressPercent":null,"scoreLevel":"5"}]},{"name":"预留洞室防水层铺设前初支状况","progressPercent":null,"subList":null,"dataList":[{"id":"2808a70b-c56e-4418-85cf-17de67a37589","name":null,"startPileStr":"K0+030","startPileNo":"30","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"5"}]}],"dataList":null},{"name":"外置保温层","progressPercent":null,"subList":[{"name":"保温层","progressPercent":null,"subList":null,"dataList":[{"id":"27960d36-0a36-435d-ad9b-2249b0240fbc","name":null,"startPileStr":"K0+010","startPileNo":"10","endPileStr":"K0+030","endPileNo":"30","progressPercent":null,"scoreLevel":"5"},{"id":"e37196d3-5430-427c-8352-1ac79938ead6","name":null,"startPileStr":"K0+004","startPileNo":"4","endPileStr":"K0+004","endPileNo":"4","progressPercent":null,"scoreLevel":"3"}]}],"dataList":null},{"name":"二衬","progressPercent":null,"subList":[{"name":"衬砌钢筋","progressPercent":null,"subList":null,"dataList":[{"id":"a7fca37d-a96b-4bb4-80c6-34d42dad3744","name":null,"startPileStr":"K4+550","startPileNo":"4550","endPileStr":"K4+600","endPileNo":"4600","progressPercent":null,"scoreLevel":"5"}]},{"name":"内置保温层","progressPercent":null,"subList":null,"dataList":[{"id":"3ca2dd7e-c990-4cf1-b0fe-524656d0ad87","name":null,"startPileStr":"K0+004","startPileNo":"4","endPileStr":"K0+009","endPileNo":"9","progressPercent":null,"scoreLevel":"1"}]}],"dataList":null},{"name":"开挖","progressPercent":null,"subList":[{"name":"掌子面围岩","progressPercent":null,"subList":null,"dataList":[{"id":"ef077ad8-3c9f-472b-8d15-e256fbe5ae76","name":null,"startPileStr":"K0+110","startPileNo":"110","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"5"},{"id":"bc0f6638-3682-4021-87e5-1766c62e6bba","name":null,"startPileStr":"K0+090","startPileNo":"90","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"4"},{"id":"d54c4a90-d92c-41c3-85aa-addc7658a857","name":null,"startPileStr":"K0+070","startPileNo":"70","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"1"},{"id":"3617bc1c-1e4b-4ef0-aa09-4ab90930cf5e","name":null,"startPileStr":"K0+030","startPileNo":"30","endPileStr":null,"endPileNo":null,"progressPercent":null,"scoreLevel":"4"},{"id":"9b77c577-7d94-4b60-ad4d-aaa179f5b42b","name":null,"startPileStr":"K4+200","startPileNo":"4200","endPileStr":"K4+200","endPileNo":"4200","progressPercent":null,"scoreLevel":"4"}]}],"dataList":null}]}')},9093:function(t,e,i){var r=i("ce10"),n=i("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,n)}},"990b":function(t,e,i){var r=i("9093"),n=i("2621"),l=i("cb7c"),a=i("7726").Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(l(t)),i=n.f;return i?e.concat(i(t)):e}},ac4d:function(t,e,i){i("3a72")("asyncIterator")},d03e:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"statistic-analysis-wrapper"},[i("el-form",{staticClass:"filter-wrapper form-inline",attrs:{model:t.filterData,inline:"","label-width":"80px"}},[i("el-form-item",{attrs:{label:"K","label-width":"20px"}},[i("el-input-number",{attrs:{size:"small","controls-position":"right",min:t.kMin,max:t.kMax,precision:0},model:{value:t.filterData.k,callback:function(e){t.$set(t.filterData,"k",e)},expression:"filterData.k"}})],1),i("el-form-item",{attrs:{label:"+","label-width":"20px"}},[i("el-input-number",{attrs:{size:"small","controls-position":"right",min:t.vMin,max:t.vMax,step:1,precision:1},model:{value:t.filterData.v,callback:function(e){t.$set(t.filterData,"v",e)},expression:"filterData.v"}})],1),i("el-button",{attrs:{size:"small",type:"primary",disabled:t.data.length<=2},on:{click:t.locationHandle}},[t._v("定位")]),i("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.renderAllNodesAndDownload}},[t._v("导出分析图")]),i("el-form-item",{attrs:{label:"行高","label-width":"80px"}},[i("el-select",{on:{change:t.changeRowHeight},model:{value:t.rowHeight,callback:function(e){t.rowHeight=e},expression:"rowHeight"}},t._l(t.rowHegihtOptions,(function(t){return i("el-option",{key:t,attrs:{value:t,label:t}})})),1)],1)],1),i("div",{staticClass:"content-wrapper"},[i("div",{staticClass:"header-info-box clearfix",class:{expand:t.isHeaderExpand}},[i("div",{staticClass:"inner-wrap"},[t._m(0),i("div",{staticClass:"tip-info-content"},[i("div",{staticClass:"tunnel-name"},[t._v(t._s(t.tunnelName))]),i("div",{ref:"description",staticClass:"description"},[t._v(t._s(t.tunnelIntroduction))]),t.descriptionWidth>t.descriptionWrapWidth?i("span",{staticClass:"expand-btn",on:{click:function(e){t.isHeaderExpand=!t.isHeaderExpand}}},[t._v(t._s(t.isHeaderExpand?"收起":"详情")),i("span",{staticClass:"el-icon-arrow-down"})]):t._e()])])]),i("div",{staticClass:"slider-wrap"},[i("el-slider",{attrs:{step:t.stepPx,min:t.meterToPxMin,max:t.meterToPxMax},on:{input:t.changeMeterHandle},model:{value:t.meterToPx,callback:function(e){t.meterToPx=e},expression:"meterToPx"}}),i("span",{staticClass:"tip-text"},[t._v("缩放比例（1米 = "+t._s(t.meterToPx)+"像素）")])],1),i("div",{ref:"tableWrap",staticClass:"table-wrapper",staticStyle:{"pointer-events":"none"}},[i("div",{ref:"canvasWrap",staticClass:"canvas-container"}),i("div",{ref:"scrollY",staticClass:"dark-scrollbar vertical",on:{scroll:t.scrollHandle}},[i("div",{style:{height:t.tableHeight+"px",width:"1px"}})]),i("div",{ref:"scrollX",staticClass:"dark-scrollbar horizontal",on:{scroll:t.scrollXHandle}},[i("div",{style:{width:t.tableWidth+"px",height:"1px"}})])]),t.current&&t.current.tooltip?[i("div",{staticClass:"tooltip-custom",style:t.tooltipStyle},[t._v(t._s((t.current||{}).tooltip))]),i("div",{staticClass:"line-tip",style:t.lineStyle})]:t._e()],2)],1)},n=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"tip-title"},[i("div",{staticClass:"current"},[t._v("操作")]),i("div",[t._v("简介")])])}];function l(t){if(Array.isArray(t))return t}function a(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,l=[],a=!0,s=!1;try{for(i=i.call(t);!(a=(r=i.next()).done);a=!0)if(l.push(r.value),e&&l.length===e)break}catch(o){s=!0,n=o}finally{try{a||null==i["return"]||i["return"]()}finally{if(s)throw n}}return l}}var s=i("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t,e){return l(t)||a(t,e)||Object(s["a"])(t,e)||o()}i("6762"),i("2fdb"),i("7f7f");var d=i("2909"),h=(i("4917"),i("8e6e"),i("456d"),i("6c7b"),i("28a5"),i("ade3")),u=(i("ac6a"),i("d263"),i("ac4d"),i("8a81"),i("5df3"),i("1c4c"),i("6b54"),i("6dd8"));function f(t,e){var i="undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=p(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,a=!0,s=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return a=t.done,t},e:function(t){s=!0,l=t},f:function(){try{a||null==i.return||i.return()}finally{if(s)throw l}}}}function p(t,e){if(t){if("string"===typeof t)return v(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var b="undefined"===typeof window,g=function(t){var e,i=f(t);try{for(i.s();!(e=i.n()).done;){var r=e.value,n=r.target.__resizeListeners__||[];n.length&&n.forEach((function(t){t()}))}}catch(l){i.e(l)}finally{i.f()}},P=function(t,e){b||(t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new u["default"](g),t.__ro__.observe(t)),t.__resizeListeners__.push(e))},m=function(t,e){t&&t.__resizeListeners__&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||t.__ro__.disconnect())},x=function(t){return t*(2-t)};function S(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,r)}return i}function y(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?S(Object(i),!0).forEach((function(e){Object(h["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):S(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var w={data:function(){return{canvasWrap:null,tableMenu:null,tableRule:null,chart:null,ctx:null,ctxRule:null,ctxFixed:null,ctxMenu:null,position:{},wrapWidth:0,wrapHeight:0,canvasHeight:0,translateX:0,translateY:0,rowHeight:40,rowHegihtOptions:[40,45,50,55,60,65],colw:40,colWidth:200,lineWidth:1,fontSize:16,fontFamily:"Microsoft YaHei Regular",tableBgColor:"transparent",tableHoverBgColor:"rgba(45, 140, 240, .1)",tableLevel3BgColor:"rgba(0, 0, 0, .04)",innerWrapBgColor:"#EEF6FD",lineColor:"#DBE2E8",fillStyle:"transparent",tickTextColor:"#84A6C3",pileStrColor:"#58718A",inOutIconBgColor:"#90A5BA",inOutIconColor:"#ffffff",fontColor:"#000000",tickFontSize:14,tickLength:8,offset:.5,scrollStep:20,ruleStep:400,preMeterToPx:4,meterToPx:4,stepPx:.5,meterToPxMin:1,meterToPxMax:30,ruleStepVal:100,faceWidth:8,zeroWidth:8,romeNumber:["Ⅰ","Ⅱ","Ⅲ","Ⅳ","Ⅴ","Ⅵ","Ⅶ","Ⅷ","Ⅸ","Ⅹ"],levelColor:["#4ECB73","#2DB7F5","#FAD337","#FF9900","#F86F00","#ED3F14"],rectColor:["#C5C9D0","#FF582F","#FF8F34","#FDC500","#3D87FF","#29CC95"],rectHoverColor:["#cccccc","#FC7858","#FAAE70","#F7D965","#84B3FE","#64D9B4"],minStripe:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGAgMAAACdogfbAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAJUExURf///////////45K5f4AAAADdFJOUwQ/Ta3MexMAAAAJcEhZcwAAAEgAAABIAEbJaz4AAAAaSURBVAjXY2BzYJBkYEhhYJggwOCQwMA4AQASZAKV6dxVvQAAAABJRU5ErkJggg==",maxStripe:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAhAQMAAACC6DsSAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAGUExURf///0dwTHBCPHYAAAACdFJOUx4AotLy5wAAAAlwSFlzAAAASAAAAEgARslrPgAAAFpJREFUCNeNzLENwCAUA9H7SkHJCBklo8FojMIIlCkQjokyQCTrqiejm4QGGXVO1LhQpSC8RYjJIczE2DETbady7cj0TWhi6yTfkn1r1jFrUHz7sfWHYRaYxQM150HTObrW+AAAAABJRU5ErkJggg==",minStripeColor:null,maxStripeColor:null,scale:1,targetX:0,targetY:0,animationStepX:0,animationStepY:0,stepTime:0,data:[],rootData:[{type:"stair",level:1,text:"隧道全程桩号",fixed:"xy",sort:-1},{type:"stair",level:1,text:"设计围岩级别",fixed:"y",data:[{start:0,end:100,level:0}]}],fixedData:'[{"type":"multistage","level":1,"text":"施工进度","expand":true,"subList":[{"text":"开挖","tip":"100%","level":2,"color":"#2D8CF0","stripe":"thick","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thick","level":2}]},{"type":"multistage","level":1,"text":"质量检查","expand":false,"subList":[{"text":"初期支护","tip":"10%","level":2,"stripe":"thin","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thin","level":2}]},{"type":"multistage","level":1,"text":"工序影像","expand":true,"subList":[{"level":2,"text":"明洞衬砌","info":"明洞及洞门","data":[{"start":50,"end":54,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":1},{"start":980,"end":1100,"level":5},{"start":1480,"end":1550,"level":5},{"start":2480,"end":2500,"level":3}],"expand":true,"subList":[{"text":"基础","level":3},{"text":"钢筋","level":3}]},{"level":2,"text":"明洞及洞门","info":"明洞及洞门","expand":false,"data":[{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":1},{"start":980,"end":1100,"level":5},{"start":1480,"end":1550,"level":5},{"start":2480,"end":2500,"level":3}],"subList":[{"text":"基础","level":3,"data":[{"start":380,"end":600,"level":3},{"start":5400,"end":5500,"level":4}]},{"text":"钢筋","level":3}]}]}]',extData:'[{"type":"multistage","level":1,"text":"施工进度","expand":true,"subList":[{"text":"开挖","tip":"100%","level":2,"color":"#2D8CF0","stripe":"thick","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thick","level":2}]},{"type":"multistage","level":1,"text":"质量检查","expand":false,"subList":[{"text":"初期支护","tip":"10%","level":2,"stripe":"thin","data":[{"start":0,"end":100,"level":0},{"start":100,"end":200,"level":3},{"start":200,"end":350,"level":2},{"start":370,"end":480,"level":4},{"start":480,"end":810,"level":5}]},{"text":"二次衬砌","tip":"5%","stripe":"thin","level":2}]}]',rules:{},tableLine:{},shaft:{},startPileNo:150,endPileNo:700,startPileStr:"",endPileStr:"",current:null,rowIndex:-1,tunnelWidth:0,tableWidth:0,tableHeight:0,contentStartX:0,contentEndX:0,contentPosition:[0,0,0,0],oldDownX:0,oldDownY:0,mouseDownX:0,mouseDownY:0,lineTableData:[]}},computed:{ruleHeight:function(){return.48*this.rowHeight},tipHeight:function(){return.52*this.rowHeight},lineRectData:function(){return this.lineTableData.filter((function(t){return t.data||!t.expand&&"xy"!==t.fixed}))}},mounted:function(){P(this.$refs.canvasWrap,this.listenVessel)},methods:{init:function(){var t=this;this.canvasWrap=this.$refs.canvasWrap,this.canvasWrap.style.backgroundColor="#ffffff",this.canvasWrap.className="".concat(this.canvasWrap.className," canvas-container"),this.tableFixed=document.createElement("canvas"),this.tableMenu=document.createElement("canvas"),this.tableRule=document.createElement("canvas"),this.chart=document.createElement("canvas"),this.canvasWrap.appendChild(this.chart),this.canvasWrap.appendChild(this.tableRule),this.canvasWrap.appendChild(this.tableMenu),this.canvasWrap.appendChild(this.tableFixed),this.ctx=this.ctx||this.chart.getContext("2d"),this.ctxMenu=this.ctxMenu||this.tableMenu.getContext("2d"),this.ctxFixed=this.ctxFixed||this.tableFixed.getContext("2d"),this.ctxRule=this.ctxRule||this.tableRule.getContext("2d");var e=new Image;e.src=this.minStripe,e.onload=function(){t.minStripeColor=t.ctx.createPattern(e,"repeat")};var i=new Image;i.src=this.maxStripe,i.onload=function(){t.maxStripeColor=t.ctx.createPattern(i,"repeat")},this.listenVessel(),this.$nextTick((function(){t.initEvent()}))},initEvent:function(){this.position=this.canvasWrap.getBoundingClientRect(),this.canvasWrap.addEventListener("mousemove",this.addMouseMove),this.canvasWrap.addEventListener("mouseleave",this.addMouseLeave),this.canvasWrap.addEventListener("click",this.addMouseClick),this.canvasWrap.addEventListener("mousedown",this.addMouseDown),document.addEventListener("mouseup",this.addMouseUp),this.canvasWrap.addEventListener("mouseenter",this.addMouseWhell)},listenVessel:function(){var t=this;clearTimeout(this.timer),this.canvasWrap&&(this.timer=setTimeout((function(){t.tableRule.width=t.tableFixed.width=t.chart.width=t.tableMenu.width=t.wrapWidth=t.canvasWrap.clientWidth,t.tableRule.height=t.tableFixed.height=t.chart.height=t.tableMenu.height=t.wrapHeight=t.canvasWrap.clientHeight,t.renderAll()}),50))},addMouseMove:function(t){var e=this;this.targetX=t.offsetX,this.targetY=t.offsetY;var i=this.targetX*this.scale,r=this.targetY*this.scale,n=i-this.translateX*this.scale,l=r-this.translateY*this.scale,a=!1;switch(!0){case this.targetY<this.ruleHeight&&this.targetX>this.colWidth:a=!0;var s=this.ruleStepVal/this.ruleStep,o=(this.targetX-this.colWidth)*s-this.translateX*s+this.startPileNo;this.current={tooltip:"K".concat(Math.floor(o/1e3),"+").concat(Math.round(o%1e3)),placement:"rule",tooltipXY:[this.targetX,0]};break;case this.targetY<this.rowHeight:break;case this.targetX<this.colWidth&&this.targetY>2*this.rowHeight:this.lineTableData.forEach((function(t){!t.fixed&&e.isInnerPolygon([i,l],t.crd)&&(a=!0,e.current=t)}));break;case this.targetY<2*this.rowHeight&&this.targetX>this.colWidth:var c=this.lineRectData[0];c&&c.rect.forEach((function(t){e.isInnerPolygon([n,r],t.crd)&&(a=!0,t.placement="top",t.tooltipXY=[e.targetX,t.crd[1][1]],e.current=t)}));break;case this.targetY>2*this.rowHeight&&this.targetX>this.colWidth:var d=Math.floor(l/this.rowHeight)-1,h=this.lineRectData[d];h&&h.rect.forEach((function(t){e.isInnerPolygon([n,l],t.crd)&&(a=!0,t.placement="top",t.tooltipXY=[e.targetX,t.crd[1][1]+e.translateY],e.current=t)}))}a||(this.current=null)},addMouseLeave:function(){this.current=null,this.removeMouseWhell()},addMouseClick:function(t){if(!(Math.abs(this.mouseDownX-t.offsetX)>2||Math.abs(this.mouseDownY-t.offsetY)>2))switch(!0){case this.current&&void 0!==this.current.expand:this.current.expand=!this.current.expand,this.calcLineTableData(),this.renderAll();break;case this.current&&!!this.current.id&&"processIma"===this.current.category:this.modalInfo={modal:!0,title:"详情",id:this.current.id,readonly:!0}}},addMouseWhell:function(){this.canvasWrap.addEventListener("mousewheel",this.scrollFunc,{passive:!1})},removeMouseWhell:function(){this.canvasWrap.removeEventListener("mousewheel",this.scrollFunc,{passive:!1})},scrollFunc:function(t){if(t.preventDefault(),t.wheelDelta){var e=t.wheelDelta>0?-1:1,i=this.tableHeight>this.wrapHeight||this.tableWidth>this.wrapWidth;if(t.shiftKey&&this.tableWidth>this.wrapWidth)this.$refs.scrollX.scrollLeft=this.$refs.scrollX.scrollLeft+this.scrollStep*e*(t.altKey?8:1);else if(t.ctrlKey){this.meterToPx-=e*this.stepPx*(t.altKey?4:1),this.meterToPx=this.meterToPx<this.meterToPxMin?this.meterToPxMin:this.meterToPx,this.meterToPx=this.meterToPx>this.meterToPxMax?this.meterToPxMax:this.meterToPx;var r=this.ruleStepVal/this.ruleStep,n=(t.offsetX-this.colWidth)*r-this.translateX*r;this.ruleStep=this.meterToPx*this.ruleStepVal,this.meterToPx<this.meterToPxMax&&(this.current=null,this.$refs.scrollX.scrollLeft=this.$refs.scrollX.scrollLeft-n*this.stepPx*e*(t.altKey?4:1)),this.renderAll()}else i&&(this.current=null,this.$refs.scrollY.scrollTop=this.$refs.scrollY.scrollTop+this.scrollStep*e)}},addMouseDown:function(t){this.oldDownX=t.pageX,this.oldDownY=t.pageY,this.mouseDownX=t.offsetX,this.mouseDownY=t.offsetY,clearTimeout(this.timer),t.offsetX>this.colWidth&&t.offsetY>2*this.rowHeight&&(document.body.style.cursor="grabbing",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",this.dragCanvas))},addMouseUp:function(){var t=this;if(document.body.style.cursor="",document.onselectstart=function(){return null},document.ondragstart=null,document.removeEventListener("mousemove",this.dragCanvas),!(Date.now()-this.stepTime>10)){var e=60*this.animationStepX,i=60*this.animationStepY,r=this.animationStepX,n=this.animationStepY,l=0,a=0,s=function s(){var o=l,c=a;l=x(t.animationStepX/e)||0,a=x(t.animationStepY/i)||0,t.animationStepX+=r,t.animationStepY+=n;var d=t.$refs.scrollX.scrollLeft,h=t.$refs.scrollY.scrollTop,u=(l-o)*e,f=(a-c)*i;t.$refs.scrollX.scrollLeft-=u,t.$refs.scrollY.scrollTop-=f,d===t.$refs.scrollX.scrollLeft&&h===t.$refs.scrollY.scrollTop||u>-1&&u<1&&f>-1&&f<1||t.animationStepX===e&&t.animationStepY===i||(t.timer=setTimeout((function(){s()}),25))};s()}},dragCanvas:function(t){var e=t.pageX,i=t.pageY,r=e-this.oldDownX,n=i-this.oldDownY;this.animationStepX=r,this.animationStepY=n,this.stepTime=Date.now(),this.oldDownX=e,this.oldDownY=i,this.$refs.scrollX.scrollLeft-=r,this.$refs.scrollY.scrollTop-=n},calcRender:function(){var t=this;this.rowIndex=-1;var e=function e(i){i.forEach((function(i,r){switch(t.rowIndex++,i.ado=[],i.rect=[],i.data&&t.calcRect(i),!0){case"multistage"===i.type:t.calcTableVertical(i,r);break;case"stair"===i.type:t.calcTableStair(i,r);break;case[2,3].includes(i.level):t.calcTableLevel23(i,r);break}!1!==i.expand&&i.subList&&i.subList.length&&e(i.subList)}))};e(this.data),this.tableLine.ado=[];for(var i=1;i<=this.rowIndex;i++){var r=(i+1)*this.rowHeight+this.offset;this.tableLine.ado.push({type:"line",crd:[[this.colWidth,r],[this.wrapWidth,r]],strokeStyle:this.lineColor,ctx:this.ctxMenu})}this.tableWidth=this.tunnelWidth,this.tableHeight=this.rowHeight*(this.rowIndex+1)+2,this.calcContentXY()},calcContentXY:function(){this.contentStartX=-this.translateX,this.contentEndX=this.wrapWidth-this.translateX,this.contentStartY=-this.translateY,this.contentEndY=this.wrapHeight-this.translateY,this.contentPosition=[[this.contentStartX,this.contentStartY],[this.contentEndX,this.contentStartY],[this.contentEndX,this.contentEndY],[this.contentStartX,this.contentEndY]]},calcRect:function(t,e){var i=this,r=this.rowIndex*this.rowHeight,n=e||("y"===t.fixed?this.ctxRule:this.ctx),l="y"===t.fixed?this.levelColor:this.rectColor,a="y"===t.fixed?this.levelColor:this.rectHoverColor;t.data.forEach((function(e){var s=e.start*i.meterToPx+i.colWidth+.5,o=0;e.end?(o=e.end*i.meterToPx+i.colWidth+.5,o+=s===o?i.zeroWidth:0):o=s+i.faceWidth-.5;var c=[[s,r+1.5],[o,r+1.5],[o,r+i.rowHeight-.5],[s,r+i.rowHeight-.5]],d={};"thick"===t.stripe?(d.fillStyle=t.color,d.fillStripe=i.maxStripeColor,d.hoverFillStyle=void 0):"thin"===t.stripe&&(d.fillStripe=i.minStripeColor,d.hoverFillStyle=void 0),e.end||(d.borderRadius=4);var h={};e.tooltip&&(h.tooltip=e.tooltip);var u=[];e.levelCode&&u.push({type:"text",text:e.centerName,crd:[s+(o-s)/2,r+i.rowHeight/2],fillStyle:"#ffffff",ctx:n}),t.rect.push(y({crd:c,ado:[y({type:"polygon",crd:c,fillStyle:l[e.level%l.length],hoverFillStyle:a[e.level%a.length],strokeStyle:"#FFFFFF",ctx:n},d)].concat(u),text:t.text,id:e.id,category:e.category},h))}))},calcTableVertical:function(t,e,i){var r=this,n=i||this.ctxMenu,l=this.destruction(),a=l.x,s=l.y,o=t.expand?0:1;t.expand&&t.subList.forEach((function(t){o++,t.expand&&t.subList&&t.subList.length&&t.subList.forEach((function(){o++}))}));var c=o*this.rowHeight,d=s+c,h={};if(t.tooltip="",t.expand){var u=this.getTextWidth(t.text,"font-size: ".concat(this.fontSize,"px")).width;u>c&&(h.text=t.text.substr(0,2*o),t.tooltip=t.text);var f=a+this.colw,p=f/2;t.crd=[[a,s],[f,s],[f,d],[a,d]],t.ado.push({type:"polygon",crd:t.crd,fillStyle:this.tableBgColor,hoverFillStyle:this.tableHoverBgColor,ctx:n,ext:h});var v=h.text||t.text,b=1.3*this.fontSize,g=s+c/2-b*(v.length/2)+12;v.split("").forEach((function(e,i){t.ado.push({type:"text",text:e,crd:[p,g+i*b],font:"bold ".concat(r.fontSize,"px ").concat(r.fontFamily),ctx:n})})),t.ado.push({type:"line",crd:[[p-6,s+16],[p,s+10],[p+6,s+16]],lineWidth:2,strokeStyle:"#e8eaec",lineCap:"round",ctx:n}),this.rowIndex--}else{this.calcTableStair(t,e,this.ctxMenu),t.ado[0].hoverFillStyle=this.tableHoverBgColor;var P=s+this.rowHeight/2-3,m=a+13;t.ado.push({type:"line",crd:[[m,P],[m+6,P+6],[m+12,P]],strokeStyle:"#e8eaec",lineWidth:2,lineCap:"round",ctx:n})}},calcTableStair:function(t,e,i){var r=this.destruction(),n=r.x,l=r.y;t.crd=[[n,l],[n,l+this.rowHeight],[n+this.colWidth,l+this.rowHeight],[n+this.colWidth,l]],t.ado.push({type:"polygon",crd:t.crd,fillStyle:this.tableBgColor,ctx:i||this.ctxFixed}),t.ado.push({type:"text",text:t.text,crd:[(n+this.colWidth)/2,l+this.rowHeight/2],font:"bold ".concat(this.fontSize,"px ").concat(this.fontFamily),ctx:i||this.ctxFixed})},calcTableLevel23:function(t,e,i){var r=i||this.ctxMenu,n=this.destruction(),l=n.x,a=n.y;t.crd=[[l+this.colw,a],[l+this.colWidth,a],[l+this.colWidth,a+this.rowHeight],[l+this.colw,a+this.rowHeight]],t.ado.push({type:"polygon",crd:t.crd,fillStyle:3===t.level?this.tableLevel3BgColor:this.tableBgColor,hoverFillStyle:["","",this.tableHoverBgColor,this.tableLevel3BgColor][t.level],ctx:r});var s=(l+this.colWidth-this.colw)/2+this.colw;if(t.tip){var o=this.getTextWidth(t.tip,"font-size: ".concat(this.fontSize,"px")).width/2+2,c=this.getTextWidth(t.text,"font-size: ".concat(this.fontSize,"px")).width/2+2;t.ado.push({type:"text",text:t.text+"(",crd:[s-o,a+this.rowHeight/2],ctx:r}),t.ado.push({type:"text",text:t.tip,crd:[s+c,a+this.rowHeight/2],fillStyle:"#2D8CF0",ctx:r}),t.ado.push({type:"text",text:")",crd:[s+c+o+2,a+this.rowHeight/2],ctx:r})}else if(t.info){t.ado.push({type:"text",text:t.info,font:"bold 13px ".concat(this.fontFamily),crd:[s,a+this.rowHeight/3-1.5],ctx:r}),t.ado.push({type:"text",text:t.text,font:"".concat(.8*this.fontSize,"px ").concat(this.fontFamily),crd:[s,a+this.rowHeight/4*3+1.5],ctx:r});var d=t.expand?1:-1;(t.subList||[]).length&&t.ado.push({type:"polygon",crd:[[s-5,a+this.rowHeight/2-3*d],[s+5,a+this.rowHeight/2-3*d],[s,a+this.rowHeight/2+3*d]],fillStyle:t.expand?"#4FA5FF":"#D3DCE6",stroke:!1,ctx:r})}else{var h={},u=this.getTextWidth(t.text,"font-size: ".concat(this.fontSize,"px")).width;u>this.colWidth-this.colw&&(h.text=t.text.substr(0,7)+"...",t.tooltip=t.text),t.ado.push(y({type:"text",text:t.text,font:"".concat(.8*this.fontSize,"px ").concat(this.fontFamily),crd:[s,a+this.rowHeight/2],ctx:r},h))}},calcLineTableData:function(){var t=[],e=function e(i){i.forEach((function(i){t.push(i),!1!==i.expand&&i.subList&&i.subList.length&&e(i.subList)}))};e(this.data),this.lineTableData=t},calcTunnelWidth:function(){this.tunnelWidth=(this.endPileNo-this.startPileNo)*this.meterToPx+this.colWidth+20},destruction:function(){return{x:this.lineWidth-this.offset,y:this.rowIndex*this.rowHeight+this.lineWidth-this.offset}},renderAll:function(){var t=this;console.log("全局绘制（重绘）"),this.$nextTick((function(){t.calcRender(),t.renderRule(),t.renderNodes(),t.renderFixed()}))},renderNodes:function(){var t=this;this.ctxFixed.clearRect(0,0,this.colWidth,this.wrapHeight),this.tableMenu.width=this.tableMenu.width,this.ctxMenu.setTransform(1,0,0,1,0,this.translateY);var e=2*this.rowHeight-this.translateY,i=this.wrapHeight-this.translateY;this.ctxMenu.rect(0,e,this.wrapWidth,i),this.ctxMenu.clip(),this.lineTableData.forEach((function(e){t.render(e)})),this.translateY&&this.renderScrollShadow(this.ctxMenu,[0,e-10,this.wrapWidth,10]),this.translateX&&this.$nextTick((function(){t.renderScrollShadow(t.ctxRule,[t.colWidth-t.translateX-10,0,10,t.rowHeight*(t.rowIndex+1)])})),this.$nextTick((function(){t.render(t.tableLine)})),this.chart.width=this.chart.width,this.ctx.setTransform(1,0,0,1,this.translateX,this.translateY),this.ctx.rect(this.colWidth+1.5-this.translateX,2*this.rowHeight+this.offset-this.translateY,this.wrapWidth,this.rowHeight*(this.rowIndex-1)),this.ctx.clip(),this.ctx.save(),this.ctx.fillStyle=this.innerWrapBgColor,this.ctx.fill(),this.ctx.restore(),this.lineRectData.forEach((function(e){if(e){var i=c(e.crd[0],2),r=i[1],n=r<=t.contentEndY&&r>=t.contentStartY;"y"===e.fixed&&(n=!0),n&&e.rect.forEach((function(e){var i=c(e.crd[0],1),r=i[0],n=c(e.crd[1],1),l=n[0],a=r>t.contentEndX&&l>t.contentEndX||r<t.contentStartX&&l<t.contentStartX;!a&&t.render(e)}))}}))},renderScrollShadow:function(t,e){t.save(),t.shadowBlur=10,t.fillStyle="red",t.shadowColor="rgba(0, 0, 0, .3)",t.fillRect.apply(t,Object(d["a"])(e)),t.restore()},render:function(t,e){var i=this,r={};(t.ado||[]).forEach((function(n){switch(n.type){case"text":r=y({},n),e&&(r.ctx=e),i.drawText(r);break;case"polygon":r=y({},n),i.current===t&&r.hoverFillStyle&&(r.fillStyle=r.hoverFillStyle),e&&(r.ctx=e),i.drawPolygon(r);break;case"line":r=y({},n),e&&(r.ctx=e),i.drawLine(r);break}}))},renderRule:function(t){var e=this,i=t||this.ctxRule;t||(this.tableRule.width=this.tableRule.width,i.setTransform(1,0,0,1,this.translateX,0),i.rect(this.colWidth-this.translateX,0,this.wrapWidth,this.wrapHeight),i.clip());var r=Math.floor(Math.abs(this.translateX)/this.ruleStep)+1,n=Math.ceil((Math.abs(this.translateX)+this.wrapWidth)/this.ruleStep)+1;this.rules.ado=[],this.rules.startX=r+this.startPileNo;for(var l=r;l<n;l++){var a=this.colWidth+l*this.ruleStep-this.offset;this.rules.ado.push({type:"line",crd:[[a,this.ruleHeight],[a,this.ruleHeight+this.tickLength]],ctx:i});var s=this.ruleHeight/2+2,o=l*this.ruleStepVal;if(this.rules.ado.push({type:"text",crd:[a,s],text:o,fillStyle:this.tickTextColor,font:"".concat(this.tickFontSize*(this.ruleStep>=100?1.1:1),"px ").concat(this.fontFamily),ctx:i}),this.ruleStep>=100){var c=0;this.ruleStep>=100&&(c=2),this.ruleStep>=200&&(c=5),this.ruleStep>=400&&(c=10),this.ruleStep>=800&&(c=20),this.ruleStep>=1500&&(c=50),this.ruleStep>=3e3&&(c=100);for(var d=this.ruleStep/c,h=1;h<c;h++){var u=a+d*h-this.ruleStep;this.rules.ado.push({type:"text",crd:[u,s],text:o+this.ruleStepVal/c*h-this.ruleStepVal,fillStyle:this.tickTextColor,font:"".concat(.75*this.tickFontSize,"px ").concat(this.fontFamily),ctx:i}),this.rules.ado.push({type:"line",crd:[[u,this.ruleHeight],[u,this.ruleHeight+this.tickLength-4]],ctx:i})}}}this.render(this.rules),this.shaft.ado=[];var f="#90A5BA";(this.shaft.originData||[]).forEach((function(t){var r=e.pileNoToCrd(t.startPileNo)+e.colWidth;e.shaft.ado.push({type:"line",crd:[[r,0],[r,e.tableHeight]],ctx:i,strokeStyle:"#FFFFFF",lineWidth:2}),e.shaft.ado.push({type:"line",crd:[[r,0],[r,e.tableHeight]],ctx:i,strokeStyle:f,lineWidth:2,setLineDash:[2,2]}),e.shaft.ado.push({type:"text",text:"".concat(t.name," ").concat(t.startPileStr),crd:[r+40,e.ruleHeight+e.tipHeight/2+2],textAlign:"start",fillStyle:e.pileStrColor,ctx:i}),e.shaft.ado.push({type:"polygon",crd:[[r-6,0],[r+6,0],[r,7]],fillStyle:f,stroke:!1,ctx:i});var n=e.ruleHeight;[r,r-25].forEach((function(t,r){var l=t+e.tipHeight,a=n+e.tipHeight,s=r?l:t,o=r?t:l,c=r?-1:1,d=s+8*c,h=s+18*c,u=[[d,a-(e.ruleHeight/2-3)],[h,a-(e.ruleHeight/2-3)],[h,a-(e.ruleHeight/2-6)],[o,a-e.ruleHeight/2],[h,a-(e.ruleHeight/2+6)],[h,a-(e.ruleHeight/2+3)],[d,a-(e.ruleHeight/2+3)],[d,n]];e.shaft.ado.push({type:"polygon",crd:u,fillStyle:f,ctx:i})}))})),this.$nextTick((function(){e.render(e.shaft)}))},renderFixed:function(t){var e=this,i=t||this.ctxFixed;!t&&i.clearRect(this.colWidth+1,0,this.wrapWidth,2*this.rowHeight),[this.lineWidth,this.ruleHeight,this.rowHeight].forEach((function(t){t-=e.offset,e.drawLine({crd:[[e.colWidth,t],[e.wrapWidth,t]],ctx:i})}));var r=this.colWidth-this.offset+1,n=this.ruleHeight-this.offset,l=Math.round(Math.abs(this.translateX)/this.ruleStep*100)+this.startPileNo,a=Math.round((Math.abs(this.translateX)+this.wrapWidth-this.colWidth)/this.ruleStep*100)+this.startPileNo,s="K".concat(Math.floor(l/1e3),"+").concat(l%1e3),o="K".concat(Math.floor(a/1e3),"+").concat(a%1e3);[r,this.wrapWidth-this.ruleHeight-this.offset].forEach((function(t,r){var l=t+e.tipHeight,a=n+e.tipHeight;e.drawPolygon({crd:[[t,n],[l,n],[l,a],[t,a]],fillStyle:e.inOutIconBgColor,ctx:i});var c=r?l:t,d=r?t:l,h=r?-1:1,u=.23*e.tipHeight,f=c+u*h,p=c+(u+2)*h,v=c+(e.tipHeight-4)*h,b=[[f,n],[f,a],[p,a],[p,a-(e.ruleHeight/2-1)],[v,a-(e.ruleHeight/2-1)],[v,a-(e.ruleHeight/2-4)],[d,a-e.ruleHeight/2],[v,a-(e.ruleHeight/2+4)],[v,a-(e.ruleHeight/2+1)],[p,a-(e.ruleHeight/2+1)],[p,n]];e.drawPolygon({crd:b,fillStyle:e.inOutIconColor,ctx:i});var g={};r&&(t+=e.ruleHeight,g.textAlign="right"),e.drawText(y({crd:[t+(e.ruleHeight+10)*h,n+e.tipHeight/2+2],text:1===h?s:o,fillStyle:e.pileStrColor,textAlign:"start",ctx:i},g))}))},pileNoToCrd:function(t){return(t-this.startPileNo)*this.meterToPx||0},drawPolygon:function(t,e){var i=t.crd.concat();if(e=t.ctx||e||this.ctx,e.save(),e.strokeStyle=t.strokeStyle||this.lineColor,e.fillStyle=t.fillStyle||this.fillStyle,e.lineWidth=t.lineWidth||this.lineWidth,t.hoverFillStyle){var r=i.map((function(t){return t[0]})),n=Math.max.apply(Math,Object(d["a"])(r)),l=Math.min.apply(Math,Object(d["a"])(r)),a=i.map((function(t){return t[1]})),s=Math.max.apply(Math,Object(d["a"])(a)),o=Math.min.apply(Math,Object(d["a"])(a));e.clearRect(l,o,n-l,s-o)}if(e.beginPath(),t.borderRadius){var h=t.borderRadius,u=i.shift(),f=c(u,2),p=f[0],v=f[1],b=p-(p-i[0][0])/2;e.moveTo(b,v);do{var g=i.shift(),P=c(g,2),m=P[0],x=P[1],S=i[0]||[p,v],y=c(S,2),w=y[0],L=y[1],N=m-(m-w)/2,A=x-(x-L)/2;e.arcTo(m,x,N,A,h)}while(i.length);e.arcTo(p,v,b,v,h)}else{var T;(T=e).moveTo.apply(T,Object(d["a"])(i.shift()));do{var C;(C=e).lineTo.apply(C,Object(d["a"])(i.shift()))}while(i.length)}if(!1!==t.closePath&&e.closePath(),e.strokeStyle=t.strokeStyle,!1!==t.stroke&&e.stroke(),t.fillStyle&&e.fill(),e.restore(),t.fillStripe){var H;e.save();var W=t.crd.concat();e.fillStyle=t.fillStripe,e.globalAlpha=t.globalAlpha||1,e.beginPath(),(H=e).moveTo.apply(H,Object(d["a"])(W.shift()));do{var k;(k=e).lineTo.apply(k,Object(d["a"])(W.shift()))}while(W.length);e.closePath(),e.fill(),e.restore()}},drawLine:function(t,e){var i,r=t.crd.concat();e=t.ctx||e||this.ctx,e.save(),e.strokeStyle=t.strokeStyle||this.lineColor,e.lineCap=t.lineCap||e.lineCap,e.lineWidth=t.lineWidth||this.lineWidth,t.setLineDash&&e.setLineDash(t.setLineDash),e.beginPath(),(i=e).moveTo.apply(i,Object(d["a"])(r.shift()));do{var n;(n=e).lineTo.apply(n,Object(d["a"])(r.shift()))}while(r.length);e.stroke(),e.restore()},drawText:function(t,e){var i;e=t.ctx||e||this.ctx,e.save(),e.textBaseline=t.textBaseline||"middle",e.textAlign=t.textAlign||"center",e.font=t.font||"".concat(this.fontSize,"px ").concat(this.fontFamily),e.fillStyle=t.fillStyle||this.fontColor,(i=e).fillText.apply(i,[t.text].concat(Object(d["a"])(t.crd))),e.restore()},isInnerPolygon:function(t,e){for(var i=c(t,2),r=i[0],n=i[1],l=!1,a=0,s=e.length-1;a<e.length;s=a++){var o=c(e[a],2),d=o[0],h=o[1],u=c(e[s],2),f=u[0],p=u[1],v=h>n!==p>n&&r<(f-d)*(n-h)/(p-h)+d;v&&(l=!l)}return l},getTextWidth:function(t,e){var i=document.createElement("div");i.setAttribute("style","position: fixed; left: -100000px; opacity: 0; ".concat(e)),i.innerHTML=t,document.body.appendChild(i);var r=i.getBoundingClientRect();return document.body.removeChild(i),r},renderAllNodesAndDownload:function(){var t=this,e=document.createElement("canvas"),i=e.getContext("2d"),r=JSON.parse(JSON.stringify(this.data)),n=this.rowIndex;this.rowIndex=-1;var l=function t(e){e.forEach((function(e){void 0!==e.expand&&(e.expand=!0),e.subList&&e.subList.length&&t(e.subList)}))};l(r);var a=this.translateX;this.translateX=0;var s=[],o=[],c=function e(r){r.forEach((function(r,n){switch(o.push(r),(!r.subList||1!==r.level)&&s.push(r),t.rowIndex++,r.ado=[],r.rect=[],r.data&&t.calcRect(r,i),!0){case"multistage"===r.type:t.calcTableVertical(r,n,i);break;case"stair"===r.type:t.calcTableStair(r,n,i);break;case[2,3].includes(r.level):t.calcTableLevel23(r,n,i);break}r.subList&&r.subList.length&&e(r.subList)}))};c(r),this.rowIndex=n;var d=this.tunnelWidth,h=s.length*this.rowHeight;e.height=h+2,e.width=d;var u=this.tableHeight;this.tableHeight=h;var f=this.wrapWidth;this.wrapWidth=d,i.fillStyle=this.innerWrapBgColor,i.fillRect(this.colWidth,this.rowHeight,d,h),o.forEach((function(e){t.render(e,i),e.rect&&e.rect.forEach((function(e){t.render(e,i)}))})),this.renderRule(i),this.renderFixed(i);for(var p={ado:[]},v=Math.floor(h/this.rowHeight)-1,b=1;b<=v;b++){var g=(b+1)*this.rowHeight+this.offset;p.ado.push({type:"line",crd:[[this.colWidth,g],[d,g]],strokeStyle:this.lineColor})}this.render(p,i),this.wrapWidth=f,this.translateX=a,this.tableHeight=u,this.$nextTick((function(){var t=e.toDataURL("image/png"),i=document.createElement("a");i.href=t,i.download="施工进度图.png";var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!1),i.dispatchEvent(r)}))},printHandle:function(t){var e=t.toDataURL("image/png"),i=window.open();i.document.write="<img src='".concat(e,"'/>"),i.print()}},destroyed:function(){var t=this.canvasWrap;t&&(m(t,this.listenVessel),t.removeEventListener("mousemove",this.addMouseMove),t.removeEventListener("mouseleave",this.addMouseLeave),t.removeEventListener("mouseenter",this.addMouseWhell),t.removeEventListener("mousedown",this.addMouseDown),t.removeEventListener("click",this.addMouseClick),document.removeEventListener("mouseup",this.addMouseUp),document.removeEventListener("keydown",this.keyDownHandle),document.removeEventListener("keyup",this.keyUpHandle))}},L=i("8f8c"),N={components:{},mixins:[w],data:function(){return{isHeaderExpand:!1,tunnelName:"",tunnelIntroduction:"",descriptionWrapWidth:0,descriptionWidth:0,tooltipStyle:{},lineStyle:{},filterData:{id:"",projectId:"",tunnelId:"",tunnelTrunkId:"",k:0,v:0},projectOptions:[],tunnelOptions:[],tunnelTrunkOptions:[],originData:{},modalInfo:{modal:!1,title:"详情",id:null}}},computed:{kMax:function(){return Math.floor(this.endPileNo/1e3)},vMax:function(){return this.filterData.k===this.kMax?this.endPileNo%1e3:999.9},kMin:function(){return Math.floor(this.startPileNo/1e3)},vMin:function(){return this.startPileNo%1e3}},watch:{meterToPx:function(t){this.calcTunnelWidth(),this.preMeterToPx=t},current:{handler:function(t,e){e&&this.render(e),t?(this.canvasWrap.style.cursor="pointer",this.render(t)):this.$refs.canvasWrap.style.cursor="",this.calcTooltipStyle()},deep:!0}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.originData=JSON.parse(JSON.stringify(L)),console.log("施工进度：",L.constructionProgress),console.log("质量检查：",L.qualityInspection),console.log("竖井、斜井：",L.slopeAndShaftList),console.log("工序影像：",L.processIma),console.log("围岩级别",L.designInfoList),this.shaft={originData:L.slopeAndShaftList||[]},this.descriptionWrapWidth=this.$refs.description.getBoundingClientRect().width-48,this.descriptionWidth=this.getTextWidth(L.tunnelIntroduction,"font-size: 15px").width,this.tunnelIntroduction=L.tunnelIntroduction,this.startPileNo=L.startPileNo>>>0,this.endPileNo=L.endPileNo>>>0,this.calcTunnelWidth(),this.$nextTick((function(){t.filterData.k=t.kMin,t.filterData.v=t.vMin})),this.startPileStr="进口 ".concat(L.startPileStr),this.endPileStr="出口 ".concat(L.endPileStr),this.formatData(),this.canvasWrap?this.renderAll():this.init(),setTimeout((function(){t.$refs.tableWrap.style.pointerEvents=""}),100)},formatData:function(){var t,e=this;this.data=JSON.parse(JSON.stringify(this.rootData)),this.originData.designInfoList&&(this.data[1].data=(this.originData.designInfoList||[]).map((function(t){t.centerName=t.levelName,t.piles=[t.startPileNo-e.startPileNo,t.endPileNo-e.startPileNo],t.end=t.piles[1],t.start=t.piles[0],t.level=t.levelType;var i=(t.levelCode||"").toLocaleUpperCase(),r=i.match(/[ⅠⅡⅢⅣⅤⅥⅦⅧⅨⅩⅪⅫ]/)[0];return t.tooltip=t.centerName,t.level=e.romeNumber.indexOf(r),t}))),(t=this.data).push.apply(t,Object(d["a"])(JSON.parse(this.extData))),this.originData.processIma&&this.originData.processIma.length&&this.data.push({text:"工序影像",expand:!0,level:1,type:"multistage",subList:this.recursiveFormatting(this.originData.processIma,2,"processIma")}),this.calcLineTableData()},recursiveFormatting:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.map((function(e){if(e.text=e.name,e.expand=!1,e.level=i,2===i&&e.subList){var n=(e.subList.splice(0,1)||[{}])[0];e.dataList=n.dataList,e.text=n.name,e.info=e.name}return e.data=(e.dataList||[]).map((function(e){return e.endPileStr?(e.piles=[e.startPileNo-t.startPileNo,e.endPileNo-t.startPileNo],e.end=e.piles[1],e.tooltip="桩号范围：".concat(e.startPileStr,"~").concat(e.endPileStr)):(e.piles=[e.startPileNo-t.startPileNo],e.tooltip="桩号：".concat(e.startPileStr)),e.category=r,e.level=e.scoreLevel||e.level,e.start=e.piles[0],e})),e.subList&&e.subList.length&&t.recursiveFormatting(e.subList,i+1,r),e})),e},scrollHandle:function(t){this.translateY=-t.target.scrollTop,this.calcContentXY(),this.renderRule(),this.renderNodes()},scrollXHandle:function(t){this.translateX=-t.target.scrollLeft,this.calcContentXY(),this.renderRule(),this.renderNodes(),this.renderFixed()},changeMeterHandle:function(t){this.preMeterToPx!==t&&(this.ruleStep=this.meterToPx*this.ruleStepVal,this.renderAll())},locationHandle:function(){var t=1e3*this.filterData.k+this.filterData.v,e=t-this.startPileNo;this.$refs.scrollX.scrollLeft=e*this.meterToPx},calcTooltipStyle:function(){var t=this;clearTimeout(this.timer2),this.timer2=setTimeout((function(){if(!t.current)return{};var e=0,i=0,r=0,n=0;if(t.lineStyle={display:"none"},["rule","top"].includes(t.current.placement)){var l=t.getTextWidth(t.current.tooltip,"padding: 5px; font-size: 14px;").width/2,a=c(t.current.tooltipXY,2);n=a[0],r=a[1],"rule"===t.current.placement&&(t.lineStyle={left:n+t.position.x+"px",top:t.position.y+"px",height:t.tableHeight+"px",maxHeight:t.wrapHeight+"px"}),n=n+t.position.x-l,r+=t.position.y-30}else{var s=c(t.current.crd[0],2);i=s[1];var o=c(t.current.crd[1],1);e=o[0];var d=2;i+=t.translateY,e+=0,n=t.position.x+e+d,r=t.position.y+i+10}t.tooltipStyle={left:n+"px",top:r+"px"}}),10)},changeRowHeight:function(){var t=this;this.$nextTick((function(){t.renderAll()}))}}},A=N,T=(i("75db"),i("2877")),C=Object(T["a"])(A,r,n,!1,null,"117c8ab9",null);e["default"]=C.exports},d263:function(t,e,i){"use strict";i("386b")("fixed",(function(t){return function(){return t(this,"tt","","")}}))},d2c8:function(t,e,i){var r=i("aae3"),n=i("be13");t.exports=function(t,e,i){if(r(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(n(t))}},d4c0:function(t,e,i){var r=i("0d58"),n=i("2621"),l=i("52a7");t.exports=function(t){var e=r(t),i=n.f;if(i){var a,s=i(t),o=l.f,c=0;while(s.length>c)o.call(t,a=s[c++])&&e.push(a)}return e}}}]);
//# sourceMappingURL=chunk-22170581.87dd7b73.js.map